<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zkzn.les.basicInfo.dao.LowerRuleDao">

	<select id="listLowerRule" resultType="com.zkzn.les.basicInfo.pojo.LowerRule">
		select * from t_lower_rule 
		
		<where>
			<if test="warehouseCode !=null and ''!= warehouseCode"> and warehouse_code = #{warehouseCode}</if>
			<if test="warehouseCodes !=null "> 
				<foreach collection="warehouseCodes" open="and warehouse_code in(" close=")" index="index" item="item" separator=",">
					#{item}
				</foreach>
			</if>
			<if test="warehouseName !=null and ''!= warehouseName"> and warehouse_name = #{warehouseName}</if>
			<if test="lowerRule !=null "> and lower_rule = #{lowerRule}</if>
			<if test="status !=null "> and status = #{status}</if>
		</where>
	</select>
	
	<update id="updateLowerRule">
		update t_lower_rule  
		 <trim prefix="set" prefixOverrides=",">
			<if test="warehouseCode !=null and ''!= warehouseCode"> , warehouse_code = #{warehouseCode}</if>
			<if test="warehouseName !=null and ''!= warehouseName"> , warehouse_name = #{warehouseName}</if>
			<if test="lowerRule !=null "> , lower_rule = #{lowerRule}</if>
			<if test="status !=null "> , status = #{status}</if>
		</trim>
		where id = #{id}
	</update>
	
	<insert id="saveLowerRule">
		<selectKey resultType="java.lang.String" order="BEFORE" keyProperty="id">
			select  replace(uuid(),'-','') from dual
		</selectKey>
			INSERT INTO t_lower_rule
		<trim prefix="("  suffix=")" suffixOverrides=",">
			id,
			<if test="warehouseCode !=null and ''!= warehouseCode"> warehouse_code,</if>
			<if test="warehouseName !=null and ''!= warehouseName"> warehouse_name,</if>
			<if test="lowerRule !=null ">lower_rule,</if>
			<if test="status !=null ">status,</if>
		</trim>
		<trim prefix="values ("  suffix=")" suffixOverrides=",">
			 replace(uuid(),'-',''),
			<if test="warehouseCode !=null and ''!= warehouseCode">#{warehouseCode},</if>
			<if test="warehouseName !=null and ''!= warehouseName">#{warehouseName},</if>
			<if test="lowerRule !=null ">#{lowerRule},</if>
			<if test="status !=null ">#{status},</if>
		</trim>  
	</insert>
	
	<delete id="removeLowerRule">
		delete from t_lower_rule where id in 
		<foreach collection="list" open=" (" close=")" index="index" item="item" separator=",">
					#{item}
		</foreach>
	</delete>
</mapper>