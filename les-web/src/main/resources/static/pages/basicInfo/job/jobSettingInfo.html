<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>任务调度信息</title>
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport"
	content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<link rel="stylesheet" href="/iles/pages/layui/css/layui.css"  type="text/css" />
<link rel="stylesheet" href="/iles/pages/css/layui_extend.css"  media="all">
</head>
<body>
<div id="bodyDiv">

</div>
<script src="/iles/pages/layui/layui.all.js" charset="UTF-8"></script>
<script src="/iles/pages/js/serverPathConfig.js" charset="UTF-8"></script>
<script src="/iles/pages/layui/lay/modules/tableFilter.js" charset="UTF-8"></script>
<script src="/iles/pages/assets/js/jquery-1.10.2.js"></script>
<script src="/iles/pages/js/loginInspect.js"></script>

<script type="text/html" id="bodyTpl">
<div class="layui-container" style="padding-top: 20px;">
		<form class="layui-form" action="" lay-filter="jobForm">
			<div class="layui-form-item">
				<div class="layui-inline">
				    <label class="layui-form-label">任务名称</label>
				    <div class="layui-input-block">
				      <input type="text" name="jobName" id="jobName" style="border:none" readonly="readonly"  class="layui-input">
				    </div>
			 	</div>
			 	<div class="layui-inline">
				    <label class="layui-form-label">任务编号</label>
				    <div class="layui-input-block">
				      <input type="text" name="jobCode" id="jobCode" style="border:none" readonly="readonly"  class="layui-input" >
				    </div>
			 	</div>
			 </div>
			 <div class="layui-form-item">
			 	<div class="layui-inline">
				    <label class="layui-form-label">任务接口类</label>
				    <div class="layui-input-block">
				      <input type="text" name="jobClassName" id="jobClassName" style="border:none" readonly="readonly"  class="layui-input">
				    </div>
			 	</div>
			 	<div class="layui-inline">
				    <label class="layui-form-label">调用方式</label>
				    <div class="layui-input-block">
						<input type="text" name="jobGroup" id="jobGroup"  class="layui-input" style="border:none" readonly="readonly" >
				    </div>
			 	</div>
			 </div>
			  <div class="layui-form-item">
			 	<div class="layui-inline" >
				    <label class="layui-form-label">间隔时间</label>
				    <div class="layui-input-block">
				      <input type="text" name="intervalTime" id="intervalTime"  style="border:none" readonly="readonly"  class="layui-input">
				    </div>
			 	</div>
			 	<div class="layui-inline" >
				    <label class="layui-form-label">定时时间</label>
				    <div class="layui-input-block">
				      <input type="text" name="cron" id="cron"  style="border:none" readonly="readonly"  class="layui-input">
				    </div>
			 	</div>
			 </div>
			 <div class="layui-form-item">
				<div class="layui-inline">
				    <label class="layui-form-label">任务描述</label>
				    <div class="layui-input-block">
				     	 <textarea style="border:none" readonly="readonly"  class="layui-textarea" name="jobDesc" id="jobDesc"></textarea>
				    </div>
			 	</div>
			 	<div class="layui-inline">
				    <label class="layui-form-label">状态</label>
				    <div class="layui-input-block">
				      <input type="text" name="status" id="status" style="border:none" readonly="readonly"   class="layui-input">
				    </div>
			 	</div>
			 </div>
			  <input type="text" hidden="true" name="id"/>
		</form>
	</div>
</script>
<script type="text/javascript">
	var contextPath = config.quartzConfig.contextPath;
	var element = layui.element;
	var layer = layui.layer;
	var table = layui.table;
	var form = layui.form
	var dictItems = parent.dictItems;
	var oldData = parent.oldData;
	function loadding(){
		if(oldData && oldData.length>0){
			  var formData =  eval('('+JSON.stringify(oldData[0])+')');
			  form.val('jobForm',formData);
		 }
		 //状态设置下拉选项开始
		 if(dictItems && dictItems.length>0){
			 defulatSelect(dictItems);
		 }else{
			 queryDictItem(); 
		 }
	}
    
    
	 function queryDictItem(){
		  var dictType = new Array();
			dictType.push("enable");
			dictType.push("job_group");
			//查询字典
			var option={
					url:config.basicInfoConfig.contextPath+'dictItems/listDictItemByTypes',
					type:'POST',
					dataType:'json',
					contentType: "application/json",
					data:JSON.stringify(dictType),
					success:function(res){
						if(res.code==0){
							dictItems = res.data
							defulatSelect(res.data);
						}
					}
  			};
			$.ajax(option);
	  }
	  function defulatSelect(dictItems){
		  if(dictItems && dictItems.length>0){
			  for(var i=0;i<dictItems.length;i++){
				  if(dictItems[i].dictTypeId=="enable"){
					  $("#status").val(dictItems[i].itemName);
				  }else if(dictItems[i].dictTypeId=="job_group"){
					  $("#jobGroup").val(dictItems[i].itemName);
				  }
			  }
		  }
	  }
</script>
</body>
</html>