<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta http-equiv="Content-Type" content="charset=UTF-8">
<meta name="viewport"
    content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<title>内部订单</title>
<link rel="stylesheet" href="/iles/pages/layui/css/layui.css"  type="text/css" />
<link rel="stylesheet" type="text/css" href="/iles/pages/css/layui_extend.css"/>
</head>
<body id="bodyDiv">
<script type="text/html" id="bodyTpl">
<div class="layui-fluid">
	<div class="layui-row layui-form">
		<div class="layui-col-md2">
			 	<label class="layui-form-label">订单号</label>
			 	<div class="layui-input-block">
			      <input type="text" id="orderCode_search" class="layui-input">
			    </div>
		</div>
		<div class="layui-col-md2">
			 	<label class="layui-form-label">订单类型</label>
			 	<div class="layui-input-block">
			      <input type="text" id="orderType_search" class="layui-input">
			    </div>
		</div>
		<div class="layui-col-md2">
			<label class="layui-form-label">描述</label>
			<div class="layui-input-block">
			      <input type="text" id="describe_search" class="layui-input">
			    </div>
		</div>
		<div class="layui-col-md2">
			&nbsp;
		</div>
		<div class="layui-col-md2">
			&nbsp;
		</div>
		<div class="layui-col-md2">
			<div class="layui-btn-container" style="text-align: left;">
				{{# if(d.search==null || d.search=="true"){ }}
             	 	<button class="layui-btn layui-btn-normal layui-btn-sm"  data-method="search" id="search" type="button"><i class="layui-icon layui-icon-search"></i>查询</button>
					<button class="layui-btn layui-btn-normal layui-btn-sm"  data-method="reset" id="reset" type="button"><i class="layui-icon layui-icon-reset"></i>重置</button>
              	{{# } }}
			</div>
		</div>
	</div>
</div>
<div class="layui-fluid-table">
<div class="layui-row layui-form">
        <div class="layui-btn-container" style="text-align: left;">
              {{# if(d.syncnorized==null || d.syncnorized=="true"){ }}
                <button class="layui-btn layui-btn-normal layui-btn-sm"  data-method="syncnorized" type="button">同步订单</button>
              {{# } }}
         </div>
	</div>
<table class="layui-hide" id="internalBillTab" lay-filter="internalBillTabF"></table>
</div>
</script>
<script src="/iles/pages/layui/layui.all.js" charset="UTF-8"></script>
<script src="/iles/pages/js/serverPathConfig.js" charset="UTF-8"></script>
<script src="/iles/pages/js/loginInspect.js" charset="UTF-8"></script>
<script src="/iles/pages/js/common/warehouseSelect.js" charset="UTF-8"></script>
<script type="text/javascript">
var table = layui.table;
var contextPath = config.basicInfoConfig.contextPath;
var form = layui.form;
var oldData;
var active = {
		search:function(othis){
			var orderCode = $("#orderCode_search").val();
			var orderType = $("#orderType_search").val();
			var describe = $("#describe_search").val();
			table.reload('internalBillTabId',{
				where:{
					orderCode:orderCode,
					orderType:orderType,
					describe:describe
				}
			});
		},
		reset:function(othis){
    		$("#orderCode_search").val("");
 			$("#orderType_search").val("");
 			$("#describe_search").val("");
 			form.render("select");
	 },
	 syncnorized:function(othis){
		 var type = othis.data('type');
		 layer.open({
	        type: 2
	        ,title:'拉取内部订单'
	        ,maxmin:false
	        ,area: ['500px', '400px']
	        ,offset: type
	        ,id: 'pullInternalBill'+type //防止重复弹出
	        ,content: 'pullInternalBill.html'
	        ,shade: 0 //不显示遮罩
	        ,yes: function(){
	          layer.closeAll();
	        }
	      });
	 }
};
function loadding(){
	table.render({
		elem:'#internalBillTab',
		id:'internalBillTabId',
		url: contextPath +'internalBill/listInternalBill',
		cols:[[
		{type:'numbers',title:'序号',width: 60},
		{field:'orderCode',title:'订单号'},
		{field:'orderType',title:'订单类型'},
		{field:'factory', title: '工厂'},
		{field:'describe',title: '描述'}
		]],
		page: {theme: '#008155'},
   		even:true
	});
	$('.layui-btn-container button').on('click', function(){
	    var othis = $(this), method = othis.data('method');
	    active[method] ? active[method].call(this, othis) : '';
  	});
}

</script>
</body>

</html>
