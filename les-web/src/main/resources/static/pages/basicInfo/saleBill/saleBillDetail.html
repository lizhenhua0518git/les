<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Content-Type" content="charset=UTF-8">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    <link rel="stylesheet" href="/iles/pages/layui/css/layui.css"
          type="text/css"/>
    <link rel="stylesheet" href="/iles/pages/css/layui_extend.css"
          type="text/css"/>
    <link rel="stylesheet" href="/iles/pages/layui/css/formSelects-v4.css"/>
    <title>销售订单物料</title>
</head>

<body id="bodyDiv">
<script type="text/html" id="bodyTpl">
    <div class="layui-fluid">
        <div class="layui-row layui-form">

            <div class="layui-col-md2">
                <label class="layui-form-label">产品编码</label>
                <div class="layui-input-inline">
                    <input type="text" id="materialCode" class="layui-input" placeholder="请输入物料编码">
                </div>
            </div>
            <div class="layui-col-md2">
                <label class="layui-form-label">产品名称</label>
                <div class="layui-input-inline">
                    <input type="text" id="materialName" class="layui-input" placeholder="请输入物料名称">
                </div>
            </div>




            <div class="layui-btn-container nav-" style="text-align: right;">
                {{# if(d.search==null || d.search=="true"){ }}
                <button class="layui-btn layui-btn-normal layui-btn-sm" data-method="search" id="search" type="button"><i
                        class="layui-icon layui-icon-search"></i>查询
                </button>
                <button class="layui-btn layui-btn-normal layui-btn-sm" data-method="reset" id="reset" type="button"><i
                        class="layui-icon  layui-icon-reset"></i>重置
                </button>
                {{# } }}


            </div>
         </div>
    </div>
    <div class="layui-fluid-table">

        <table class="layui-hide" id="saleBillDetailTab" lay-filter="saleBillDetailTabF"></table>
    </div>
</script>
<script src="/iles/pages/layui/layui.all.js" charset="UTF-8"></script>
<script src="/iles/pages/js/serverPathConfig.js" charset="UTF-8"></script>
<script src="/iles/pages/js/loginInspect.js" charset="UTF-8"></script>
<script src="/iles/pages/js/common/dictSelelct.js" charset="UTF-8"></script>
<script src="/iles/pages/js/common/warehouseSelect.js" charset="UTF-8"></script>
<script type="text/javascript">
    var element = layui.element;
    var layer = layui.layer;
    var table = layui.table;
    var form = layui.form;

    var oldData=parent.oldData;
    var contextPath = config.basicInfoConfig.contextPath;
    var active = {

        search: function (othis) {

            var materialCode = $('#materialCode').val();
            var materialName =  $('#materialName').val();
            var params = {};

            params.materialCode = materialCode;
            params.materialName = materialName;

            //执行重载
            table.reload('saleBillDetailTabId', {
                url: contextPath + 'saleBill/listSaleBillDetail',
                where: params,
            });
        },
        reset: function (othis) {
           // $('#orderCode').val("");
            $('#materialCode').val("");
            $('#materialName').val("");

            form.render("select");
        }

    };

    function loadding() {
        form.render("select");
        table.render({
            elem: '#saleBillDetailTab',
            id: 'saleBillDetailTabId',
            url: contextPath + 'saleBill/listSaleBillDetail',
            where: {"orderCode": oldData.orderCode},
            data: [],
            cols: [[{
                type: 'numbers',
                title: '序号'
            }, {
                field: 'materialCode',
                title: '产品编码'
            }, {
                field: 'materialDesc',
                title: '产品名称'
            }, {
                field: 'materialUnit',
                title: '产品单位'
            }, {
                field: 'materialNum',
                title: '产品数量'
            }, {
                field: 'materialRoup',
                title: '产品组'
            }]],
            page: {
                theme: '#008155'
            },
            even: true,
            done: function (res, page, count) {//列表数据回调函数
                initTableDate();
            }
        });


        $('.layui-btn-container button').on('click', function () {
            var othis = $(this), method = othis.data('method');
            active[method] ? active[method].call(this, othis) : '';
        });
    }





</script>
</body>
</html>
