<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>查看组织信息</title>
<link rel="stylesheet" href="/iles/pages/layui/css/layui.css"  media="all">
<link rel="stylesheet" href="/iles/pages/css/index.css"  media="all">
<link rel="stylesheet" href="/iles/pages/css/layui_extend.css"  media="all">

<script src="/iles/pages/js/fullScreen.js"></script>
</head>
<body>
 <div id="bodyDiv">

</div>
<div class="layui-container" style="padding-top: 20px;">
	<form class="layui-form" action="" lay-filter="orgForm">
		<div class="layui-form-item">
			<div class="layui-inline">
			    <label class="layui-form-label">组织编号</label>
			    <div class="layui-input-block">
			      <input type="text" name="orgCode" style="border:none" readonly="readonly" class="layui-input">
			    </div>
		 	</div>
		 </div>
		 <div class="layui-form-item">
			 <div class="layui-inline">
				    <label class="layui-form-label">组织名称</label>
				    <div class="layui-input-block">
				      <input type="text" name="orgName" style="border:none" readonly="readonly" class="layui-input">
				    </div>
			 </div>
		 </div>
		 <div class="layui-form-item">
			 <div class="layui-inline">
				    <label class="layui-form-label">上级组织</label>
				    <div class="layui-input-block">
				      <input type="text" name="parentName"  id="parentName" style="border:none"  class="layui-input" readonly="readonly">
				    </div>
			 </div>
		 </div>
		 <div class="layui-form-item">
			 <div class="layui-inline">
				    <label class="layui-form-label">组织类型</label>
				    <div class="layui-input-block">
				    	<input type="text" name="orgType"  id="orgType" style="border:none"  class="layui-input" readonly="readonly">
			         </div>
			 </div>
		 </div>
		  <div class="layui-form-item">
			 <div class="layui-inline">
				    <label class="layui-form-label">状态</label>
				     <div class="layui-input-block">
				     	<input type="text" name="status"  id="status" style="border:none"  class="layui-input" readonly="readonly">
			         </div>
			 </div>
		 </div>
		  <input id="parentId" name="parentId" hidden="true"/>
		  <input id="id" name="id" hidden="true"/>
	</form>
	</div>
	<script src="/iles/pages/layui/layui.all.js" charset="UTF-8"></script>
	<script src="/iles/pages/js/serverPathConfig.js" charset="UTF-8"></script>
	<script src="/iles/pages/layui/lay/modules/tableFilter.js" charset="UTF-8"></script>
	<script src="/iles/pages/js/loginInspect.js"></script>
	<script type="text/html" id="bodyTpl"></script>
	<script type="text/javascript">
	var contextPath = config.basicInfoConfig.contextPath;
	function loadding(){}
		var $ = layui.$;
		var element = layui.element;	
		var layer = layui.layer;
		var form;
	 	layui.use(['form', 'layedit', 'laydate'], function(){
		  form = layui.form
		  ,layer = layui.layer
		  ,layedit = layui.layedit
		  ,laydate = layui.laydate;
		  
		  //日期
		  laydate.render({
		    elem: '#date'
		  });
		  laydate.render({
		    elem: '#date1'
		  });
		 //创建一个编辑器
		  var editIndex = layedit.build('LAY_demo_editor');
		 
		  //自定义验证规则
		  form.verify({
			  orgCode: function(value){
		      if(value.length < 1){
		        return '组织编号不能为空';
		      }
		    }
		    ,orgName: function(value){
			      if(value.length < 1){
				        return '组织名称不能为空';
				      }
				    }
		  });
		//加载表单内容
		var oldData = parent.oldData;
		var dictItems = parent.dictItems;
		if(oldData && oldData.length>0){//给表单赋初始值
			 var formData =  eval('('+JSON.stringify(oldData[0])+')');
		   	 form.val("orgForm",formData);
		   	 if(oldData[0].parentId.length>0){
		   		var option  = {
						url:contextPath+'orgination/getOrgination?id='+oldData[0].parentId,
						type:'GET',
						contentType:'application/json',
						success:function(data){
							if(data.code==0 && data.data!=null){
								$("#parentName").val(data.data.orgName);
								return false;
							}
						}
				};
				$.ajax(option);	
		   	 }
		   	 if(formData.orgType.length>0){
		   		for(var i=0;i<dictItems.length;i++){
    				if(dictItems[i].dictTypeId=="org_type" && dictItems[i].itemValue==formData.orgType){
    					$("#orgType").val(dictItems[i].itemName);
    				}
    			}
		   	 }
	   		for(var i=0;i<dictItems.length;i++){
		   		if(dictItems[i].dictTypeId=="enable" && dictItems[i].itemValue==formData.status){
		   			$("#status").val(dictItems[i].itemName);
				}
	   		}
		   	 
		}
	});
	</script>
</body>
</html>