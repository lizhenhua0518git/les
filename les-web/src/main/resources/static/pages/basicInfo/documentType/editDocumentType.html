<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta http-equiv="Content-Type" content="charset=UTF-8">
<meta name="viewport"
    content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<title>新增单据类型</title>
<link rel="stylesheet" href="/iles/pages/layui/css/layui.css"  type="text/css" />
</head>

<body id="bodyDiv">



<script type="text/html" id="bodyTpl">
<div class="layui-container" style="padding-top: 20px;">
	<form class="layui-form" action="" lay-filter="documentForm">
	 		<div class="layui-form-item">
				 <div class="layui-inline">
				 	<label class="layui-form-label layui-required">单据类型编码</label>
					<div class="layui-input-block">
						  <input type="text" name="documentCode" disabled lay-verify="required" autocomplete="off"  class="layui-input">
					</div> 
				</div>
			</div>
			<div class="layui-form-item">
				<div class="layui-inline">
				 	<label class="layui-form-label layui-required">单据类型名称</label>
					<div class="layui-input-block">
						  <input type="text" name="documentName" disabled lay-verify="required" autocomplete="off"  class="layui-input">
					</div> 
				</div>
			</div>
			<div class="layui-form-item">
				<div class="layui-inline">
				 	<label class="layui-form-label layui-required">业务类型</label>
					<div class="layui-input-block">
						  <select name="businessType" id="businessType" lay-verify="required">
					        	<option value="">请选择</option>
					      </select>
					</div> 
				</div>
			</div>
			<div class="layui-form-item">
				<div class="layui-inline">
				 	<label class="layui-form-label layui-required">来源</label>
					<div class="layui-input-block">
							<select name="sourceOfDocument" id="sourceOfDocument" lay-verify="required">
					        	<option value="">请选择</option>
					      	</select>
					</div> 
				</div>
			</div>
			<div class="layui-form-item">
				<div class="layui-inline">
				 	<label class="layui-form-label layui-required">状态</label>
					<div class="layui-input-block">
						  <select name="status" id="status" lay-verify="required">
					        <option value="">请选择</option>
					      </select>
					</div> 
				</div>
			</div>
			<div class="layui-form-item">
			    <div class="layui-input-block">
			      <button class="layui-btn" lay-submit="" lay-filter="documentSubit">立即提交</button>
			      <button type="reset" class="layui-btn layui-btn-primary">重置</button>
			    </div>
		  </div>
		 <input type="hidden" name="id"  class="layui-input" >
	</form>
</div>
</script>
<script src="/iles/pages/layui/layui.all.js" charset="UTF-8"></script>
<script src="/iles/pages/js/serverPathConfig.js" charset="UTF-8"></script>
<script src="/iles/pages/js/loginInspect.js" charset="UTF-8"></script>
<script src="/iles/pages/js/common/dictSelelct.js" charset="UTF-8"></script>
<script type="text/javascript">
var form = layui.form
var contextPath = config.basicInfoConfig.contextPath;
var oldData = parent.oldData;
function loadding(){
	
	var dictItems = new Array();//字典内容查询值
	dictItems.push('enable');
	dictItems.push('source_of');
	dictItems.push('business_type');
	var dictLabelId = new Array();//元素id值
	dictLabelId.push('status');
	dictLabelId.push('sourceOfDocument');
	dictLabelId.push('businessType');
	if(oldData.length>0){
	   	var formData =  eval('('+JSON.stringify(oldData[0])+')');
	   	form.val("documentForm",formData);
	   	var defualtValues = new Array();//元素选中值
		defualtValues.push(formData.status);
		defualtValues.push(formData.sourceOfDocument);
		defualtValues.push(formData.businessType);
		queryDictItems(dictItems,dictLabelId,defualtValues);
	}
	
	
	//监听提交
	form.on('submit(documentSubit)', function(data){
		 data.field.id = oldData[0].id;//防止重置后id丢失
		  var option = {
	    	url:contextPath +'documentType/updateDocumentType',
	    	data:JSON.stringify(data.field),
	    	type:'POST',
	    	contentType:'application/json',
	    	success:function(data){
	    		if(data.code==0){
	    			var index = parent.layer.getFrameIndex(window.name); //获取窗口索引
	    			parent.layer.close(index);  // 关闭layer
	    			parent.table.reload('documentTypeTabId');
	    		}else{
	    			layer.alert(data.data);
	    		}
	    	},error:function(data){
	    		layer.alert(data.msg)
	    	}
	    }
	    $.ajax(option);  
		return false;
	});
}
</script>
</body>

</html>