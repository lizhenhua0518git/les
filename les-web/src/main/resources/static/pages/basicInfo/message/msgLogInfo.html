<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport"
	content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<link rel="stylesheet" href="/iles/pages/layui/css/layui.css"  type="text/css" />
<link rel="stylesheet" href="/iles/pages/css/layui_extend.css"  media="all">
<title>查看消息日志</title>
</head>
<body>

  <div id="bodyDiv">

</div>
	<div class="layui-container" style="padding-top: 20px;">
		<form class="layui-form" action="" lay-filter="msgLogForm">
			<div class="layui-form-item">
				<div class="layui-inline">
				    <label class="layui-form-label">接收人</label>
				    <div class="layui-input-block">
				      <input type="text" name="receiver" style="border:none" readonly="readonly"  id="receiver" class="layui-input" >
				    </div>
			 	</div>
			 	<div class="layui-inline">
				    <label class="layui-form-label">发送时间</label>
				    <div class="layui-input-block">
				      <input type="text" name="sendTime" style="border:none" readonly="readonly"  id="sendTime" lay-verify="templetTitle"class="layui-input" >
				    </div>
			 	</div>
			 </div>
			<div class="layui-form-item">
				<div class="layui-inline">
				    <label class="layui-form-label">消息类型</label>
				    <div class="layui-input-block">
				      <input type="text" name="msgTypeId" style="border:none" readonly="readonly"  id="msgTypeId" readonly="readonly"  class="layui-input" >
				    </div>
			 	</div>
			 	<div class="layui-inline">
				    <label class="layui-form-label">发送方式</label>
				    <div class="layui-input-block">
				     	<input type="text" name="sendMode" style="border:none" readonly="readonly"  id="sendMode" class="layui-input" >
			         </div>
			 	</div>
			 </div>
		 	 <div class="layui-form-item">
		 	 	<div class="layui-inline">
				    <label class="layui-form-label">接收方式</label>
				    <div class="layui-input-block">
				   		 <input type="text" name="receiveMode" style="border:none" readonly="readonly"  id="receiveMode" class="layui-input" >
			         </div>
			 	</div>
		 		<div class="layui-inline">
				    <label class="layui-form-label">是否阅读</label>
				    <div class="layui-input-block">
				    	 <input type="text" name="isreaded" style="border:none" readonly="readonly"  id="isreaded" class="layui-input" >
			         </div>
			 	</div>
		 	</div>
		 	<div class="layui-form-item">
		 	 	<div class="layui-inline">
				    <label class="layui-form-label">是否失效</label>
				    <div class="layui-input-block">
			      		<input type="text" name="isexpired" style="border:none" readonly="readonly"  id="isexpired" class="layui-input" >
			      	</div>
			 	</div>
		 		<div class="layui-inline">
				    <label class="layui-form-label">消息内容</label>
				    <div class="layui-input-block">
				    	 <textarea placeholder="请输入模板内容" class="layui-textarea" style="border:none" readonly="readonly"  name="msgContent" id="msgContent"></textarea>
			         </div>
			 	</div>
		 	</div>
		</form>
	</div>
	  <script src="/iles/pages/layui/layui.all.js" charset="UTF-8"></script>
	<script src="/iles/pages/js/serverPathConfig.js" charset="UTF-8"></script>
	<script src="/iles/pages/layui/lay/modules/tableFilter.js" charset="UTF-8"></script>
	<script src="/iles/pages/assets/js/jquery-1.10.2.js"></script>
	<script src="/iles/pages/js/loginInspect.js"></script>
 
	<script type="text/html" id="bodyTpl"></script>
	<script type="text/javascript">
		var $ = layui.$;
		var element = layui.element;
		var layer = layui.layer;
		var table = layui.table;
		var form = layui.form
		var oldData = parent.oldData;
		var dictItems = parent.dictItems;
		if(oldData && oldData.length>0){
			 var formData =  eval('('+JSON.stringify(oldData[0])+')');
			 form.val('msgLogForm',formData)
		}
		if(dictItems && dictItems.length>0){
			 defulatSelect(dictItems);
		 }else{
			 queryDictItem(); 
		 }
		 function queryDictItem(){
			  var dictType = new Array();
			  dictType.push("read_status");
  			  dictType.push("send_mode");
  			  dictType.push("expired_status");
				//查询字典
				var option={
						url:'${ctx}/dictItems/queryDictItemByTypes',
						type:'POST',
						dataType:'json',
						contentType: "application/json",
						data:JSON.stringify(dictType),
						success:function(res){
							if(res.code==0){
								dictItems = res.data
								defulatSelect(res.data);
							}
						}
	  			};
				$.ajax(option);
		  }
		  function defulatSelect(dictItems){
			  if(dictItems && dictItems.length>0){
				  for(var i=0;i<dictItems.length;i++){
					  if(dictItems[i].dictTypeId=="read_status" && oldData[0].isreaded==dictItems[i].itemValue){
						  $("#isreaded").val(dictItems[i].itemName);
					  }else if(dictItems[i].dictTypeId=="send_mode"){
						  if(oldData[0].receiveMode==dictItems[i].itemValue)
						 	 $("#receiveMode").val(dictItems[i].itemName);
						  if(oldData[0].sendMode==dictItems[i].itemValue)
							 	 $("#sendMode").val(dictItems[i].itemName);
					  }else if(dictItems[i].dictTypeId=="expired_status" && oldData[0].isexpired==dictItems[i].itemValue){
						  $("#isexpired").val(dictItems[i].itemName);
					  }
				  }
			  }
		  }
	</script>
</body>
</html>