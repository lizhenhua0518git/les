<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="Access-Control-Allow-Origin" content="*" />
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-COMPATIBLE" content="IE=edge,chrome=1"/>
<title>配送进度概览</title>
<link rel="stylesheet" href="/iles/pages/layui/css/layui.css"  type="text/css" />
<link rel="stylesheet" href="/iles/pages/css/controlCabin/progressView.css">
<link rel="stylesheet" href="/iles/pages/css/controlCabin/flipclock.css">
<style type="text/css">
  ul.sectionBorder-h4 > li{width: calc((100% - 1.2rem)/5)}
  ul.sectionBorder-h4 > li:nth-child(5n + 4){width: calc((100% - 1.2rem)/5)}
  ul.sectionBorder-h4 > li:nth-child(5n + 5){margin-left: 0.3rem;}
  ul.sectionBorder-h4 ul.rateList > li{width: auto; float: none;}
  ul.sectionBorder-h4 ul.rateList > li label{width: 1.2rem;}
</style>
</head>

<body>
<div id="bodyDiv">

</div>
 <script src="/iles/pages/layui/layui.all.js" charset="UTF-8"></script>
<script src="/iles/pages/js/serverPathConfig.js" charset="UTF-8"></script>
<script src="/iles/pages/assets/js/jquery-1.10.2.js"></script>
<script src="/iles/pages/js/loginInspect.js"></script>


 
<script src="/iles/pages/js/controlCabin/resetFontSize.js"></script>
 <script src="/iles/pages/wms/controlCabin/productPlanBoard/js/easypiechart.js"></script>
<script src="/iles/pages/wms/controlCabin/productPlanBoard/js/echarts.js"></script>
 <script src="/iles/pages/js/controlCabin/flipclock.js"></script>
<script src="/iles/pages/wms/controlCabin/productPlanBoard/js/stationNeatRate.js"></script>
<script type="text/html" id="bodyTpl">
<div class="progressTop" >
	<div class="dateChoose">
		<div class="_inline">
			<label>需求日期</label>
			<input type="text" name="" id="requireDate_search" style="width:400px">
		</div>
		<div class="_inline ml60" style="display:none">
			<label>派工日期</label>
			<input type="text" name="" id="activeDate_search" style="width:400px">
		</div> 
	</div>
	<div class="buttonGroup">
		<button id="onsearch">查询</button>
		<button id="rechod">重置</button>
	</div>
</div>
<div class="container mt50 ml50 mr50" style="width:1824px;height:100%">
	<div class="tit">
		各产线送达交接及进度
		<div class="collapse">
			<span></span>
			<i class="layui-icon layui-icon-up"></i>
		</div>
	</div>
	<div class="sectionTit">
		<h1>动车组装线</h1>
		<h1>动车组装配送齐套率[%]</h1>
	</div>
	<ul class="section sectionBorder sectionBorder-h4 ">
		<li>
			<div >
				<div class="desc">
					<h1>送达进度</h1> 
				</div>
				<div class="chart" id="dcx_send"></div>
				<span class="minValue" id="dcx_send_minValue">0</span>
				<span class="maxValue" id="dcx_send_maxValue">0</span>
			</div>
		</li>
		<li>
			<div>
				<div class="desc">
					<h1>交接进度</h1> 
				</div>
				<div class="chart" id="dcx_hand"></div>
				<span class="minValue" id="dcx_hand_minValue">0</span>
				<span class="maxValue" id="dcx_hand_maxValue">0</span>
			</div>
		</li>
		<li>
			<div>
				<div class="desc">
					<h1>配送进度(工位)</h1>
				</div>
				<div class="chart" id="dcx_js"></div>
				<span class="minValue" id="dcx_js_minValue">0</span>
				<span class="maxValue" id="dcx_js_maxValue">0</span>
			</div>
		</li>
		<li>
			<div>
				<div class="desc">
					<h1>配送进度(非工位)</h1>
				</div>
				<div class="chart" id="dcx_fgwjs"></div>
				<span class="minValue" id="dcx_fgwjs_minValue">0</span>
				<span class="maxValue" id="dcx_fgwjs_maxValue">0</span>
			</div>
		</li>
		<li>
			<div>
				<ul class="rateList rateList-v" id="dcx_rateList">
					
				</ul>
			</div>
		</li>
		</ul>
		<div class="sectionTit">
			<h1>动车车体</h1>
			<h1>动车车体配送齐套率[%]</h1>
		</div>
		<ul class="section sectionBorder sectionBorder-h4 ">
		<li>
			<div>
				<div class="desc">
					<h1>送达进度</h1> 
				</div>
				<div class="chart" id="dcct_send"></div>
				<span class="minValue" id="dcct_send_minValue">0</span>
				<span class="maxValue" id="dcct_send_maxValue">0</span>
			</div>
		</li>

		<li>
			<div>
				<div class="desc">
					<h1>交接进度</h1> 
				</div>
				<div class="chart" id="dcct_hand"></div>
				<span class="minValue" id="dcct_hand_minValue">0</span>
				<span class="maxValue"  id="dcct_hand_maxValue">0</span>
			</div>
		</li>
		<li>
			<div>
				<div class="desc">
					<!-- <p id="dcct_js_num">0笔</p>-->
					<h1>配送进度(工位)</h1> 
				</div>
				<div class="chart" id="dcct_js"></div>
				<span class="minValue" id="dcct_js_minValue">0</span>
				<span class="maxValue" id="dcct_js_maxValue">0</span>
			</div>
		</li>
		<li>
			<div>
				<div class="desc">
					<!-- <p id="dcct_js_num">0笔</p>-->
					<h1>配送进度(非工位)</h1> 
				</div>
				<div class="chart" id="dcct_fgwjs"></div>
				<span class="minValue" id="dcct_fgwjs_minValue">0</span>
				<span class="maxValue" id="dcct_fgwjs_maxValue">0</span>
			</div>
		</li>
		<li>
			<div>
				<ul class="rateList rateList-v" id="dcct_rateList">
					
				</ul>
			</div>
		</li>
		</ul>
		<div class="sectionTit">
			<h1>动车检修</h1>
			<h1>动车检修配送齐套率[%]</h1>
		</div>
		<ul class="section sectionBorder sectionBorder-h4 ">
		<li>
			<div>
				<div class="desc">
					<!-- <p id="djx_send_num">0笔</p>-->
					<h1>送达进度</h1> 
				</div>
				<div class="chart" id="djx_send"></div>
				<span class="minValue" id="djx_send_minValue">0</span>
				<span class="maxValue" id="djx_send_maxValue">0</span>
			</div>
		</li>
		<li>
			<div>
				<div class="desc">
					<!-- <p id="djx_hand_num">0笔</p> -->
					<h1>交接进度</h1>
				</div>
				<div class="chart" id="djx_hand"></div>
				<span class="minValue" id="djx_hand_minValue">0</span>
				<span class="maxValue" id="djx_hand_maxValue">0</span>
			</div>
		</li>
		<li>
			<div>
				<div class="desc">
					<!-- <p id="djx_js_num">0笔</p>-->
					<h1>配送进度(工位)</h1> 
				</div>
				<div class="chart" id="djx_js"></div>
				<span class="minValue" id="djx_js_minValue">0</span>
				<span class="maxValue" id="djx_js_maxValue">0</span>
			</div>
		</li>
		<li>
			<div>
				<div class="desc">
					<!-- <p id="djx_js_num">0笔</p>-->
					<h1>配送进度(非工位)</h1> 
				</div>
				<div class="chart" id="djx_fgwjs"></div>
				<span class="minValue" id="djx_fgwjs_minValue">0</span>
				<span class="maxValue" id="djx_fgwjs_maxValue">0</span>
			</div>
		</li>
		<li>
			<div>
				<ul class="rateList rateList-v" id="djx_rateList">
					
				</ul>
			</div>
		</li>
		</ul>
	
		<div class="sectionTit">
			<h1>碳钢组装</h1>
			<h1>碳钢组装配送齐套率[%]</h1>
		</div>
		<ul class="section sectionBorder sectionBorder-h4 ">
		<li>
			<div>
				<div class="desc">
					<!-- <p id="tgx_send_num">0笔</p>-->
					<h1>送达进度</h1> 
				</div>
				<div class="chart" id="tgx_send"></div>
				<span class="minValue" id="tgx_send_minValue">0</span>
				<span class="maxValue" id="tgx_send_maxValue">0</span>
			</div>
		</li>
		<li>
			<div>
				<div class="desc">
					<!-- <p id="tgx_hand_num">0笔</p> -->
					<h1>交接进度</h1>
				</div>
				<div class="chart" id="tgx_hand"></div>
				<span class="minValue" id="tgx_hand_minValue">0</span>
				<span class="maxValue" id="tgx_hand_maxValue">0</span>
			</div>
		</li>
		<li>
			<div>
				<div class="desc">
					<!-- <p id="tgx_js_num">0笔</p> -->
					<h1>配送进度(工位)</h1>
				</div>
				<div class="chart" id="tgx_js"></div>
				<span class="minValue" id="tgx_js_minValue">0</span>
				<span class="maxValue" id="tgx_js_maxValue">0</span>
			</div>
		</li>
		<li>
			<div>
				<div class="desc">
					<!-- <p id="tgx_js_num">0笔</p> -->
					<h1>配送进度(非工位)</h1>
				</div>
				<div class="chart" id="tgx_fgwjs"></div>
				<span class="minValue" id="tgx_fgwjs_minValue">0</span>
				<span class="maxValue" id="tgx_fgwjs_maxValue">0</span>
			</div>
		</li>
		<li>
			<div>
				<ul class="rateList rateList-v" id="tgx_rateList">
					
				</ul>
			</div>
		</li>
		</ul>
	
		<div class="sectionTit">
			<h1>碳钢车体</h1>
			<h1>碳钢车体配送齐套率[%]</h1>
		</div>
		<ul class="section sectionBorder sectionBorder-h4 ">
		<li>
			<div>
				<div class="desc">
					<!-- <p id="tgct_send_num">0笔</p>-->
					<h1>送达进度</h1> 
				</div>
				<div class="chart" id="tgct_send"></div>
				<span class="minValue" id="tgct_send_minValue">0</span>
				<span class="maxValue" id="tgct_send_maxValue">0</span>
			</div>
		</li>
			<li>
			<div>
				<div class="desc">
					<!-- <p id="tgct_hand_num">0笔</p>-->
					<h1>交接进度</h1> 
				</div>
				<div class="chart" id="tgct_hand"></div>
				<span class="minValue" id="tgct_hand_minValue">0</span>
				<span class="maxValue" id="tgct_hand_maxValue">0</span>
			</div>
		</li>
		<li>
			<div>
				<div class="desc">
					<!-- <p id="tgct_js_num">0笔</p>-->
					<h1>配送进度(工位)</h1> 
				</div>
				<div class="chart" id="tgct_js"></div>
				<span class="minValue" id="tgct_js_minValue">0</span>
				<span class="maxValue" id="tgct_js_maxValue">0</span>
			</div>
		</li>
		<li>
			<div>
				<div class="desc">
					<!-- <p id="tgct_js_num">0笔</p>-->
					<h1>配送进度(非工位)</h1> 
				</div>
				<div class="chart" id="tgct_fgwjs"></div>
				<span class="minValue" id="tgct_fgwjs_minValue">0</span>
				<span class="maxValue" id="tgct_fgwjs_maxValue">0</span>
			</div>
		</li>
		<li>
			<div>
				<ul class="rateList rateList-v" id="tgct_rateList">
					
				</ul>
			</div>
		</li>
		</ul>
	
		<div class="sectionTit">
			<h1>转向架</h1>
			<h1>转向架配送齐套率[%]</h1>
		</div>
		<ul class="section sectionBorder sectionBorder-h4 ">
		<li>
			<div>
				<div class="desc">
					<!-- <p id="zxj_send_num">0笔</p> -->
					<h1>送达进度</h1>
				</div>
				<div class="chart" id="zxj_send"></div>
				<span class="minValue" id="zxj_send_minValue">0</span>
				<span class="maxValue" id="zxj_send_maxValue">0</span>
			</div>
		</li>
		<li>
			<div>
				<div class="desc">
					<!-- <p id="zxj_hand_num">0笔</p> -->
					<h1>交接进度</h1>
				</div>
				<div class="chart" id="zxj_hand"></div>
				<span class="minValue" id="zxj_hand_minValue">0</span>
				<span class="maxValue" id="zxj_hand_maxValue">0</span>
			</div>
		</li>
		<li>
			<div>
				<div class="desc">
					<!-- <p id="zxj_js_num">0笔</p>-->
					<h1>配送进度(工位)</h1> 
				</div>
				<div class="chart" id="zxj_js"></div>
				<span class="minValue" id="zxj_js_minValue">0</span>
				<span class="maxValue" id="zxj_js_maxValue">0</span>
			</div>
		</li>
		<li>
			<div>
				<div class="desc">
					<!-- <p id="zxj_js_num">0笔</p>-->
					<h1>配送进度(非工位)</h1> 
				</div>
				<div class="chart" id="zxj_fgwjs"></div>
				<span class="minValue" id="zxj_fgwjs_minValue">0</span>
				<span class="maxValue" id="zxj_fgwjs_maxValue">0</span>
			</div>
		</li>
		<li>
			<div>
				<ul class="rateList rateList-v" id="zxj_rateList">
					
				</ul>
			</div>
		</li>
	</ul>
	<!-- <div class="tit">各产线配送及时率</div>
	<ul class="section">

		
		

		
		
	</ul> -->
<div style="font-size: 0.3rem;overflow: hidden;" >
	<div class="dateChoose">
		<div class="_inline">
			<label>需求日期</label>
			<input type="text" name="" id="requiredDate" style="width:400px">
		</div>
		<div class="buttonGroup" style="padding-left: 0.5rem;">
			<button id="" onclick="searchNeatRate();">查询</button>
		</div>
	</div>
</div>
	<div class="tit">各产线工位齐套率</div>
	<div class="sectionTit2">
		<h2>动车线</h2>
		<h2>碳钢线</h2>
		<h2>动检线</h2>
	</div>
	<ul class="section sectionOverflow">
		<li>
			<div>
				<ul class="production" id="dcLine">
					<!-- <li><div class="item" id="rateBar11"></div></li>
					<li><div class="item" id="rateBar12"></div></li>
					<li><div class="item" id="rateBar13"></div></li>
					<li><div class="item" id="rateBar14"></div></li> -->
				</ul>
			</div>
		</li>
		<li>
			<div>
				<ul class="production" id="tgLine">
					
				</ul>
			</div>
		</li>
		<li>
			<div>
			
			</div>
		</li>
	</ul>
	 
</div>
</script>
<script>
var contextPath = config.wmsConfig.contextPath;
function loadding(){
	var $ = layui.$;
	var element = layui.element;
	var laydate = layui.laydate;
	$(function(){
		var curDate = new Date();
		curDate.setDate(curDate.getDate()+1);
		var curDateStr = dateFtt("yyyy-MM-dd",curDate);
		var curDate2=new Date(curDate.getTime()-2*24*60*60*1000);
		var beforeDate=dateFtt("yyyy-MM-dd",curDate2);
		var defautDate = curDateStr+" - "+curDateStr;
		var beforeDateStr=beforeDate+" - "+beforeDate;
		//日期控件
		laydate.render({
			elem:"#requireDate_search",
			value: defautDate,
			range: true
		});
		laydate.render({
			elem:"#activeDate_search",
			range:true
		});
		laydate.render({
			elem:"#requiredDate",
			value: beforeDateStr,
			range: true
		});
		function dateFtt(fmt,date)   
		{ //author: meizz   
		  var o = {   
		    "M+" : date.getMonth()+1,                 //月份   
		    "d+" : date.getDate(),                    //日   
		    "h+" : date.getHours(),                   //小时   
		    "m+" : date.getMinutes(),                 //分   
		    "s+" : date.getSeconds(),                 //秒   
		    "q+" : Math.floor((date.getMonth()+3)/3), //季度   
		    "S"  : date.getMilliseconds()             //毫秒   
		  };   
		  if(/(y+)/.test(fmt))   
		    fmt=fmt.replace(RegExp.$1, (date.getFullYear()+"").substr(4 - RegExp.$1.length));   
		  for(var k in o)   
		    if(new RegExp("("+ k +")").test(fmt))   
		  fmt = fmt.replace(RegExp.$1, (RegExp.$1.length==1) ? (o[k]) : (("00"+ o[k]).substr((""+ o[k]).length)));   
		  return fmt;   
		}
		$(".rateList-v").children("li").css({float:"none"})
		function initParams(){
			var param = {};
			var requiredDate = $("#requireDate_search").val();
			var activeDate = $("#activeDate_search").val();
			var requiredStartTime = "";
			var requiredEndTime ="";
			if(requiredDate=="" && activeDate==""){
				var requiredStartTime = curDateStr;
				var requiredEndTime =curDateStr;
			}
			if(requiredDate.length>0){
				requiredStartTime = requiredDate.substring(0,10);
				requiredEndTime = requiredDate.substring(13);
			}
			var activeStartTime = "";
			var activeEndTime="";
			if(activeDate.length>0){
				activeStartTime = activeDate.substring(0,10);
				activeEndTime = activeDate.substring(13);
			}
			param.requiredStartTime=requiredStartTime;
			param.requiredEndTime = requiredEndTime;
			param.activeStartTime = activeStartTime;
			param.activeEndTime = activeEndTime;
			return param;
		}
		$("#rechod").click(function(){
			$("#requireDate_search").val("");
			$("#activeDate_search").val("");
		});
		$("#onsearch").click(function(){
			//初始化数据
			defualtData();
			var params = initParams();
			//加载送达、交接任务
			initSendTask(params);
			//加载配送及时率
			initSendTimelines(params);
			//加载工位齐套率
			//initStationQT(params);
			initSendQT(params);
			
			
		});
		
		function initSendQT(params){
			var options = {
					url:contextPath+'progressOverview/listSendKitting',
					data:params,
					type:'GET',
					success:function(res){
						if(res.code==0){
							var data = res.data;
							for(var key in data){
								if(key=="动车组装"){
									appendHtml("dcx_rateList",data[key]);
								}else if(key=="动车车体"){
									appendHtml("dcct_rateList",data[key]);
								}else if(key=="动车检修"){
									appendHtml("djx_rateList",data[key]);
								}else if(key=="碳钢组装"){
									appendHtml("tgx_rateList",data[key]);
								}else if(key=="碳钢车体"){
									appendHtml("tgct_rateList",data[key]);
								}else if(key=="转向架"){
									appendHtml("zxj_rateList",data[key]);
								} 
							}
						}
					}
			};
			$.ajax(options);
		}
		function appendHtml(elmentId,data){
			var dataMap = null;
			var html = "";
			for(var i=0;i<data.length;i++){
				dataMap = data[i];
				html = html + "<li><label>"+dataMap.projectCode+"</label><span></span><div><div id='"+elmentId+"_"+i+"'></div></div></li>"

			}
			$("#"+elmentId).html(html);
			for(var i=0;i<data.length;i++){
				var prent = (data[i].orderCountNum-data[i].wqtOrderNum)/data[i].orderCountNum;
				console.log(prent);
				prent = prent.toFixed(4);
				prent = prent * 100;
				if(data[i].orderCountNum==0){
					prent = 0;
				}
				var clock1 = new FlipClock($("#"+elmentId+"_"+i), prent, {
					clockFace: 'Counter'
				});
			}
		
		}
		function initStationQT(params){
			var options = {
					url:contextPath+'progressOverview/stationQT',
					data:params,
					//data:JSON.stringify(params),
					//contentType:'application/json',
					type:'GET',
					success:function(res){
						if(res.code==0){
							var data = res.data;
							for(var key in data){
								var qtNum = data[key].qtNum;
								var totalNum = data[key].totalNum;
								var prenct = (qtNum/totalNum).toFixed(2)*100;
								if(key=="动车组装"){
									$("#dcx_prent").text("动车组装（"+prenct+"%）");
									element.progress('dcx_progressBar', prenct+'%');
								}else if(key=="动车车体"){
									$("#dcct_prent").text("动车车体（"+prenct+"%）");
									element.progress('dcct_progressBar',prenct+'%');
								}else if(key=="动车检修"){
									$("#djx_prent").text("动车检修（"+prenct+"%）");
									element.progress('djx_progressBar', prenct+'%');
								}else if(key=="碳钢组装"){
									$("#tgx_prent").text("碳钢组装（"+prenct+"%）");
									element.progress('tgx_progressBar', prenct+'%');
								}else if(key=="碳钢车体"){
									$("#tgct_prent").text("碳钢车体（"+prenct+"%）");
									element.progress('tgct_progressBar', prenct+'%');
								}else if(key=="转向架"){
									$("#zxj_prent").text("转向架（"+prenct+"%）");
									element.progress('zxj_progressBar', prenct+'%');
								}  
							}
						}
					},error:function(res){
						layer.alert("加载送达及时率失败");
					}
			};
			$.ajax(options);
		}
		function initSendTimelines(params){
			var options = {
					url:contextPath+'progressOverview/listSendTimelines',
					data:params,
					//data:JSON.stringify(params),
					//contentType:'application/json',
					type:'GET',
					success:function(res){
						if(res.code==0){
							var data = res.data;
							for(var key in data){
								if(key=="动车组装"){
									//$("#dcx_js_num").html(data[key].jsNum);
									$("#dcx_js_maxValue").html(data[key].gwtotalNum);
									gaugeChart("dcx_js",{completed:data[key].gwjsNum, total:data[key].gwtotalNum, color:"#ee8a62"});
									$("#dcx_fgwjs_maxValue").html(data[key].fgwtotalNum);
									gaugeChart("dcx_fgwjs",{completed:data[key].fgwjsNum, total:data[key].fgwtotalNum, color:"#6dcd7f"});
								}else if(key=="动车车体"){
									//$("#dcct_js_num").html(data[key].jsNum);
									$("#dcct_js_maxValue").html(data[key].gwtotalNum);
									gaugeChart("dcct_js",{completed:data[key].gwjsNum, total:data[key].gwtotalNum, color:"#ee8a62"});
									$("#dcct_fgwjs_maxValue").html(data[key].fgwtotalNum);
									gaugeChart("dcct_fgwjs",{completed:data[key].fgwjsNum, total:data[key].fgwtotalNum, color:"#6dcd7f"});
								}else if(key=="动车检修"){
									//$("#djx_js_num").html(data[key].jsNum);
									$("#djx_js_maxValue").html(data[key].gwtotalNum);
									gaugeChart("djx_js",{completed:data[key].gwjsNum, total:data[key].gwtotalNum, color:"#ee8a62"});
									$("#djx_fgwjs_maxValue").html(data[key].fgwtotalNum);
									gaugeChart("djx_fgwjs",{completed:data[key].fgwjsNum, total:data[key].fgwtotalNum, color:"#6dcd7f"});
								}else if(key=="碳钢组装"){
									//$("#tgx_js_num").html(data[key].jsNum);
									$("#tgx_js_maxValue").html(data[key].gwtotalNum);
									gaugeChart("tgx_js",{completed:data[key].gwjsNum, total:data[key].gwtotalNum, color:"#ee8a62"});
									$("#tgx_fgwjs_maxValue").html(data[key].fgwtotalNum);
									gaugeChart("tgx_fgwjs",{completed:data[key].fgwjsNum, total:data[key].fgwtotalNum, color:"#6dcd7f"});
								}else if(key=="碳钢车体"){
									$("#tgct_js_maxValue").html(data[key].gwtotalNum);
									gaugeChart("tgct_js",{completed:data[key].gwjsNum, total:data[key].gwtotalNum, color:"#ee8a62"});
									$("#tgct_fgwjs_maxValue").html(data[key].fgwtotalNum);
									gaugeChart("tgct_fgwjs",{completed:data[key].fgwjsNum, total:data[key].fgwtotalNum, color:"#6dcd7f"});
								}else if(key=="转向架"){
									$("#zxj_js_maxValue").html(data[key].gwtotalNum);
									gaugeChart("zxj_js",{completed:data[key].gwjsNum, total:data[key].gwtotalNum, color:"#ee8a62"});
									$("#zxj_fgwjs_maxValue").html(data[key].fgwtotalNum);
									gaugeChart("zxj_fgwjs",{completed:data[key].fgwjsNum, total:data[key].fgwtotalNum, color:"#6dcd7f"});
								}  
							}
						}
					},error:function(res){
						layer.alert("加载送达及时率失败");
					}
			};
			$.ajax(options);
		}
		function initSendTask(params){
			var options = {
					url:contextPath+'progressOverview/listSendHandProcess',
					data:params,
					//data:JSON.stringify(params),
					//contentType:'application/json',
					type:'GET',
					success:function(res){
						if(res.code==0){
							var data = res.data;
							for(var key in data){
								if(key=="动车组装"){
									//$("#dcx_send_num").html(data[key].ysds);
									$("#dcx_send_maxValue").html(data[key].totalNum);
									gaugeChart("dcx_send",{completed:data[key].ysds, total:data[key].totalNum, color:"#2ec9cf"});
									//$("#dcx_hand_num").html(data[key].yjjs);
									$("#dcx_hand_maxValue").html(data[key].totalNum);
									gaugeChart("dcx_hand",{completed:data[key].yjjs, total:data[key].totalNum, color:"#eabc2e"});
								}else if(key=="动车车体"){
									//$("#dcct_send_num").html(data[key].ysds);
									$("#dcct_send_maxValue").html(data[key].totalNum);
									gaugeChart("dcct_send",{completed:data[key].ysds, total:data[key].totalNum, color:"#2ec9cf"});
									//$("#dcct_hand_num").html(data[key].yjjs);
									$("#dcct_hand_maxValue").html(data[key].totalNum);
									gaugeChart("dcct_hand",{completed:data[key].yjjs, total:data[key].totalNum, color:"#eabc2e"});
								}else if(key=="动车检修"){
									//$("#djx_send_num").html(data[key].ysds);
									$("#djx_send_maxValue").html(data[key].totalNum);
									gaugeChart("djx_send",{completed:data[key].ysds, total:data[key].totalNum, color:"#2ec9cf"});
									//$("#djx_hand_num").html(data[key].yjjs);
									$("#djx_hand_maxValue").html(data[key].totalNum);
									gaugeChart("djx_hand",{completed:data[key].yjjs, total:data[key].totalNum, color:"#eabc2e"});
								}else if(key=="碳钢组装"){
									//$("#tgx_send_num").html(data[key].ysds);
									$("#tgx_send_maxValue").html(data[key].totalNum);
									gaugeChart("tgx_send",{completed:data[key].ysds, total:data[key].totalNum, color:"#2ec9cf"});
									//$("#tgx_hand_num").html(data[key].yjjs);
									$("#tgx_hand_maxValue").html(data[key].totalNum);
									gaugeChart("tgx_hand",{completed:data[key].yjjs, total:data[key].totalNum, color:"#eabc2e"});
								}else if(key=="碳钢车体"){
									$("#tgct_send_maxValue").html(data[key].totalNum);
									gaugeChart("tgct_send",{completed:data[key].ysds, total:data[key].totalNum, color:"#2ec9cf"});
									//$("#tgx_hand_num").html(data[key].yjjs);
									$("#tgct_hand_maxValue").html(data[key].totalNum);
									gaugeChart("tgct_hand",{completed:data[key].yjjs, total:data[key].totalNum, color:"#eabc2e"});
								}else if(key=="转向架"){
									$("#zxj_send_maxValue").html(data[key].totalNum);
									gaugeChart("zxj_send",{completed:data[key].ysds, total:data[key].totalNum, color:"#2ec9cf"});
									//$("#tgx_hand_num").html(data[key].yjjs);
									$("#zxj_hand_maxValue").html(data[key].totalNum);
									gaugeChart("zxj_hand",{completed:data[key].yjjs, total:data[key].totalNum, color:"#eabc2e"});
								}  
							}
						}
					},error:function(res){
						layer.alert("加载送达、交接任务失败");
					}
			};
			$.ajax(options);
		}
		function defualtData(){
			$("#dcx_rateList").html("");
			$("#dcct_rateList").html("");
			$("#djx_rateList").html("");
			$("#tgx_rateList").html("");
			$("#tgct_rateList").html("");
			$("#zxj_rateList").html("");
/* 			element.progress('djx_progressBar', '1%');
			element.progress('dcx_progressBar', '1%');
			element.progress('dcct_progressBar', '1%');
			element.progress('tgx_progressBar', '1%');
			element.progress('tgct_progressBar', '1%');
			element.progress('zxj_progressBar', '1%'); */
			gaugeChart("dcx_send",{completed:0, total:1, color:"#eabc2e"});
			gaugeChart("dcx_hand",{completed:0, total:1, color:"#eabc2e"});
			gaugeChart("dcct_send",{completed:0, total:1, color:"#eabc2e"});
			gaugeChart("dcct_hand",{completed:0, total:1, color:"#eabc2e"});
			gaugeChart("djx_send",{completed:0, total:1, color:"#eabc2e"});
			gaugeChart("djx_hand",{completed:0, total:1, color:"#eabc2e"});
			gaugeChart("tgx_send",{completed:0, total:1, color:"#eabc2e"});
			gaugeChart("tgx_hand",{completed:0, total:1, color:"#eabc2e"});
			gaugeChart("tgct_send",{completed:0, total:1, color:"#eabc2e"});
			gaugeChart("tgct_hand",{completed:0, total:1, color:"#eabc2e"});
			gaugeChart("zxj_send",{completed:0, total:1, color:"#eabc2e"});
			gaugeChart("zxj_hand",{completed:0, total:1, color:"#eabc2e"});
			
			gaugeChart("dcx_js",{completed:0, total:1, color:"#eabc2e"});
			gaugeChart("dcct_js",{completed:0, total:1, color:"#eabc2e"});
			gaugeChart("djx_js",{completed:0, total:1, color:"#eabc2e"});
			gaugeChart("tgx_js",{completed:0, total:1, color:"#eabc2e"});
			gaugeChart("tgct_js",{completed:0, total:1, color:"#eabc2e"});
			gaugeChart("zxj_js",{completed:0, total:1, color:"#eabc2e"});
			
			gaugeChart("dcx_fgwjs",{completed:0, total:1, color:"#eabc2e"});
			gaugeChart("dcct_fgwjs",{completed:0, total:1, color:"#eabc2e"});
			gaugeChart("djx_fgwjs",{completed:0, total:1, color:"#eabc2e"});
			gaugeChart("tgx_fgwjs",{completed:0, total:1, color:"#eabc2e"});
			gaugeChart("tgct_fgwjs",{completed:0, total:1, color:"#eabc2e"});
			gaugeChart("zxj_fgwjs",{completed:0, total:1, color:"#eabc2e"});
			$("#dcx_send_num").html(0);
			$("#dcx_send_maxValue").html(0);
			$("#dcx_hand_num").html(0);
			$("#dcx_hand_maxValue").html(0);
			$("#dcct_send_num").html(0);
			$("#dcct_send_maxValue").html(0);
			$("#dcct_hand_num").html(0);
			$("#dcct_hand_maxValue").html(0);
			$("#djx_send_num").html(0);
			$("#djx_send_maxValue").html(0);
			$("#djx_hand_num").html(0);
			$("#djx_hand_maxValue").html(0);
			$("#tgx_send_num").html(0);
			$("#tgx_send_maxValue").html(0);
			$("#tgx_hand_num").html(0);
			$("#tgx_hand_maxValue").html(0);
			$("#dcx_js_num").html(0);
			$("#dcx_js_maxValue").html(0);
			$("#dcct_js_num").html(0);
			$("#dcct_js_maxValue").html(0);
			$("#djx_js_num").html(0);
			$("#djx_js_maxValue").html(0);
			$("#tgx_js_num").html(0);
			$("#tgx_js_maxValue").html(0);
			
			
			$("#dcx_fgwjs_num").html(0);
			$("#dcx_fgwjs_maxValue").html(0);
			$("#dcct_fgwjs_num").html(0);
			$("#dcct_fgwjs_maxValue").html(0);
			$("#djx_fgwjs_num").html(0);
			$("#djx_fgwjs_maxValue").html(0);
			$("#tgx_fgwjs_num").html(0);
			$("#tgx_fgwjs_maxValue").html(0);
	
		}
		/* setTimeout(() => {
			$("#onsearch").click();
		}, 100000);   */
		/* setTimeout(function (){
			$("#onsearch").click();
		}, 8000); */
	   $("#onsearch").click();
		function gaugeChart(id,data){
			var gauge = document.getElementById(id);
			
			if(data.total==0){
				data.total = 1;
			}
			var prent = data.completed/data.total;
			var option = {
				series: [
					{
						name: '业务指标',
						type: 'gauge',
						center: ['50%', '55%'],
						min: 0,
						max: 100,
						axisLine: {
							lineStyle:{
								color:[[(data.completed/data.total), data.color], [1, '#4b9bec']],
							}
						},
						splitLine:{
							show:false
						},
						axisTick:{
							show:false
						},
						axisLabel:{
							show:false
						},
						pointer:{
							length:"60%"
						},
						itemStyle:{
							color:"#4b9bec"
						},
						title:{
							show:false
						},
						detail:{
							color:"#c0dcfe",
							fontSize:24,
							formatter: "{value}%",
						},
						data: [{value:(prent*100).toFixed(2)}]
					}
				]
			};
			var  n = echarts.init(gauge);
			/* 				setTimeout(function(){
				 n.resize({
					width:gauge.clientWidth,
					height:gauge.clientHeight
				}); 
			}, 5000); */
			
			n.setOption(option);
			checkHeight(gauge,n);
			//n.setOption(option);
		};
	 
	function checkHeight(domObj,chartObj){
		if(domObj.clientWidth==0){
			setTimeout(function(){
				checkHeight(domObj,chartObj);
			}, 1000);
		}else{
			chartObj.resize({
				width:domObj.clientWidth,
				height:domObj.clientHeight
			});
		}
	}
	//折叠&展开
	$(".collapse").click(function(){
		$(".sectionBorder").slideToggle(2000);
		$(".collapse i").toggleClass("layui-icon-down");
		$(".collapse i").toggleClass("layui-icon-up");
		if($(".collapse i").hasClass("layui-icon-down")){
			//$(".collapse span").text('展开');
			$(".sectionTit").hide(2000);
		}else{
			//$(".collapse span").text('折叠');
			$(".sectionTit").show(2000);
		}
	});
	});
	 
	  
}
	
	
</script>
<script type="text/javascript">
var contextPath = config.wmsConfig.contextPath;
$(function(){
	var DCXParams=initParams();
	DCXParams.type='DCX';
	var TGXParams=initParams();
	TGXParams.type='TGX';
	initStationNeatRate(DCXParams,'dcLine');
	initStationNeatRate(TGXParams,'tgLine');
});
</script>
 
</body>
</html>
