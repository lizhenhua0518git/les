<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>直送详情</title>
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport"
	content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

	<script src="/iles/pages/js/jquery-3.3.1.min.js"></script>
 
	<script src="/iles/pages/layui/layui.js" charset="UTF-8"></script>
	<script src="/iles/pages/layui/layui.all.js" charset="UTF-8"></script>
	<script src="/iles/pages/layui/lay/modules/layer.js" charset="UTF-8"></script>
	<link rel="stylesheet" href="/iles//pages/layui/css/layui.css"  type="text/css" />
    <link rel="stylesheet" href="/iles//pages/css/layui_extend.css"  media="all">
    <link rel="stylesheet" href="/iles/pages/layui/css/modules/layer/default/layer.css"  type="text/css" />
</head>
<body>
<div id="bodyDiv">

</div>
<script src="/iles/pages/layui/layui.all.js" charset="UTF-8"></script>
<script src="/iles/pages/js/serverPathConfig.js" charset="UTF-8"></script>
<script src="/iles/pages/js/loginInspect.js"></script>
<script type="text/html" id="bodyTpl">
<div class="layui-fluid" style="margin-top: 10px">
		<form class="layui-form" action="">
			<input type="hidden" id="oldJobNode">
			<input type="hidden" name="arrivalDetailId" id="arrivalDetailId"/>
			<div class="layui-row layui-form">
				<!-- 查询条件 begin-->
				<div class="layui-col-md3">
					<label class="layui-form-label">物料号:</label>
			 		<div class="layui-input-block">
			      		<input type="text" id="materialCode" name="materialCode" class="layui-input" placeholder="请输入物料号">
				    </div>
				</div>
				 
				<!-- 查询条件 end-->
				<!-- 按钮区域begin -->
				<div class="layui-col-md6">
					<div class="layui-btn-container" style="text-align: right;">			

					   {{# if(d.search==null || d.search=="true"){ }}
		           			<button class="layui-btn layui-btn-normal layui-btn-sm"  data-method="search" id="search" type="button"><i class="layui-icon layui-icon-search"></i>查询</button>
		           			<button class="layui-btn layui-btn-normal layui-btn-sm"  data-method="reset" type="button"><i class="layui-icon-reset"></i>重置</button>
	            		{{# } }}

					</div>
				</div>
				<input type="hidden" id="carrierCode" value="">
				<!-- 按钮区域end -->
			</div>
		</form>
	</div>
	
	<table id="directDeliveryDetailTab" lay-filter="directDeliveryDetailTabF"></table>
</script>
<script type="text/javascript">
	var layer = layui.layer;
	var table = layui.table;
	var form = layui.form;
	var contextPath = config.wmsConfig.contextPath;
	var oldData;
	var active = {
			search:function(othis){
				//执行重载
				table.reload('directDeliveryDetailTabId', {
					where:{
						materialCode : $('#materialCode').val(),
						 
				      	page:1
				  	}
				});
			},
			reset:function(othis){
				$('#materialCode').val("");
			 
			}
			 
		};
	function loadding(){
		table.render({
			elem:'#directDeliveryDetailTab',
			id:'directDeliveryDetailTabId',
	    	url:contextPath+'directDeliveryPc/queryDirectArrivalNoticeDetailList?id='+parent.$("#id").val(),
		    cols: [[
		    	 {type:'numbers',title:'序号',width: 60},
		    	 {field:'arrivalCode', title: '到货通知单号',width:140},
		    	 {field:'materialCode', title: '物料号',width:140},
				 {field:'materialDesc', title: '物料描述',minWidth:180},
				 {field:'storageLocation', title: '库存地点',minWidth:100},
				 {field:'inspectMgrUName', title: '质检SAP管理工',minWidth:120},
				 {field:'assembleMgrUName', title: '集配SAP管理工',minWidth:120},
			   
			    {field:'arrivalItemNo',title: '行项目',width:75},
			    {field:'batchNo', title: '批次号',width:120},
			    {field:'expireDate', width:130, title: '到期日'},
			    {field:'totalCount', title: '交货数量',width:90},
			    {field:'unloadPosition', title: '卸货地点',width:90},
			    {field:'jobNode', title: '作业状态',width:120},
			    {field:'checkCount', title: '清点数量',width:90},
			    {field:'orderCode', title: '生产订单号',width:90},
			    {field:'reserveNum', title: '预留号',width:120},
			    {field:'finishedCount', title: '发货数量',width:120},
			    {field:'operationUser', title: '点收操作员',align: 'center',width:120},
			    {field:'checkBeginTime', title: '开始点收时间',width:120},
			    {field:'handOperUserName', title: '车间交接人',width:120},
			    {field:'createTime', title: '交接时间',width:120},
			    {field:'pointCheckTime', title: '清点审核时间',width:120},
			    {field:'pointCheckUserName', title: '清点审核人',width:120},
			    {field:'handCheckTime', title: '交接审核时间',width:120},
			    {field:'handCheckUserName', title: '交接审核人',width:120},
			    {field:'voucherCode', title: '收货凭证',width:120},
			    {field:'voucherLineItem', title: '收货凭证行',width:90},
			    {field:'handleVoucherCode', title: '发货凭证',width:90},
		    	]],
			 
			height: 'full-95',
    		even:true,
    		done:function(res,page,count){//列表数据回调函数
    			initTableDate(res.data);
    		}
		});	
		$('.layui-btn-container button').on('click', function(){
		    var othis = $(this), method = othis.data('method');
		    active[method] ? active[method].call(this, othis) : '';
	  	});
	}
	 //表格数据初始化
    function initTableDate(data){
    	  $("[data-field='jobNode']").children().each(function(){
    		  if($(this).text()==''){
                  $(this).text('待卸货');
              }
    		  else if($(this).text()=='10'){
                  $(this).text('直送到货');
              }else if($(this).text()=='20'){
                  $(this).text('开始卸货');
              }else if($(this).text()=='30'){
                  $(this).text('卸货完成 ');
              } else if($(this).text()=='40'){
                  $(this).text('开始点收');
              } else if($(this).text()=='50'){
                  $(this).text('点收完成');
              } else if($(this).text()=='51'){
                  $(this).text('交接完成');
              } else if($(this).text()=='60'){
                  $(this).text('开始清点审核');
              } else if($(this).text()=='70'){
                  $(this).text('清点审核完成');
              } else if($(this).text()=='80'){
                  $(this).text(' 开始交接审核');
              } else if($(this).text()=='90'){
                  $(this).text('交接审核完成');
              }    
               
          });
      
    } 
</script>
</body>
</html>