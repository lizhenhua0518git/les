<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>集配单详细列表</title>
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport"
	content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<link rel="stylesheet" href="/iles/pages/layui/css/layui.css"  type="text/css" />
<link rel="stylesheet" href="/iles/pages/css/layui_extend.css"  media="all">
<style type="text/css">
.layui-table-body{
	overflow-x:scroll;
}
</style>
</head>
<body>
<div id="bodyDiv">

</div>
<script src="/iles/pages/layui/layui.all.js" charset="UTF-8"></script>
<script src="/iles/pages/js/serverPathConfig.js" charset="UTF-8"></script>
<script src="/iles/pages/js/loginInspect.js"></script>
<script type="text/html" id="bodyTpl">
<table class="layui-hide" id="orderDetailTab" lay-filter="orderDetailTabF"></table>
</script>
<script type="text/javascript">
	var table = layui.table;
	var assembleId = parent.assembleId;//集配单主键
	var deliveryCode=parent.deliveryCode;//出库单号
	var orderCode=parent.orderCode;//订单号
	var contextPath = config.wmsConfig.contextPath;
	var active = {
			search:function(othis){
				var materialNum_search = $("#materialNum_search").val();
				var materialDesc_search = $("#materialDesc_search").val();
				var reserveNum_search = $("#reserveNum_search").val();
				table.reload('orderDetailTabId',{
						where:{
							materialNum:materialNum_search,
							materialDesc:materialDesc_search,
							reserveNum_search:reserveNum_search,
							orderId:orderId
						}
						,page:{"curr":1}
					})
				},
			reset:function(othis){
				$("#materialNum_search").val("");
				$("#materialDesc_search").val("");
				$("#reserveNum_search").val("");
			}
	};
	function loadding(){
		table.render({
			elem:"#orderDetailTab",
			id:"orderDetailTabId",
			url:contextPath+"outBoundPlanManger/listAssembleDetail",
			cols:[[
			     {type:'checkbox'},
			     {field:'deliveryCode',title:'出库单号',width:100},
			     {field:'deliveryRowCode',title:'出库行项目',width:100},
			     {field:'reserveCode',title:'预留号',width:100},
			     {field:'reserveRow',title:'预留行',width:100},
			     {field:'materialCode',title:'SAP物料号',width:150},
			     {field:'materialDesc',title:'物料描述',width:100},
			     {field:'materialUnit',title:'单位',width:100},
			     {field:'enableCount',title:'集配数量',width:100},
			     {field:'assembleuid',title:'集配人',width:100},
			     {field:'checkuid',title:'复核人',width:100},
			     {field:'unsendCount',title:'未发料数量',width:100},
			     {field:'factory',title:'工厂',width:100},
			     {field:'orderCode',title:'订单号',width:100},
			     {field:'deliverMode',title:'配送方式',width:100},
			     {field:'deliverPlatform',title:'配送台位',width:100},
			     {field:'planFillgoodTime',title:'计划补货完成日期',width:150},
			     {field:'planFillgoodTime',title:'计划补货完成时间',width:150},
			     {field:'planDeliverTime',title:'计划配送完成日期',width:150},
			     {field:'planDeliverTime',title:'计划配送完成时间',width:150}
			     ]],
			 page: {theme: '#008155'},
			 height: 'full-200',
			 even:true,
			 where:{
				 assembleId:assembleId
			 },
			 done:function(res,page,count){//列表数据回调函数
				 $("[data-field='deliveryCode']").children().each(function(){
					 	if(deliveryCode!=null && 'null'!=deliveryCode && $(this).text().trim()!='出库单号')
							$(this).text(deliveryCode);
					});
				 $("[data-field='orderCode']").children().each(function(){
					 if(orderCode!=null && 'null'!=orderCode && $(this).text().trim()!='订单号')
						$(this).text(orderCode);
					});
			 }
		});
		$('.layui-btn-container button').on('click', function(){
		    var othis = $(this), method = othis.data('method');
		    active[method] ? active[method].call(this, othis) : '';
	  	});
	}




</script>
</body>
</html>
