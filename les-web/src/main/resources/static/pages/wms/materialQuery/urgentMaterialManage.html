<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>紧急物料查询</title>
	<meta name="renderer" content="webkit|ie-comp|ie-stand">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
	<meta http-equiv="Cache-Control" content="no-siteapp" />
<link rel="stylesheet" href="/iles/pages/layui/css/layui.css"  type="text/css" />
<link rel="stylesheet" href="/iles/pages/css/layui_extend.css"  media="all">
<link rel="stylesheet" href="/iles/pages/layui/css/modules/layer/default/layer.css"  type="text/css" />
<link rel="stylesheet" href="/iles/pages/layui/css/formSelects-v4.css" />
<link rel="stylesheet" href="/iles/pages/layui/css/tableFilter.css"  type="text/css" />
</head>
<body>
  <div id="bodyDiv">

</div>

	<script src="/iles/pages/layui/layui.all.js" charset="UTF-8"></script>
<script src="/iles/pages/js/serverPathConfig.js" charset="UTF-8"></script>
<script src="/iles/pages/layui/lay/modules/tableFilter.js" charset="UTF-8"></script>
<script src="/iles/pages/assets/js/jquery-1.10.2.js"></script>
<script src="/iles/pages/js/loginInspect.js"></script>
<script type="text/html" id="bodyTpl">

<div class="layui-fluid">
	 <input type="text"  id="transferBinId" hidden="true" />
	  <input type="text"  id="transferBinCode" hidden="true" />
		<div class="layui-row layui-form">
			<div class="layui-col-md3">
                <label class="layui-form-label">排号日期:</label>
                <div class="layui-input-block layui-form">
                    <input type="text" class="layui-input" name="startTime" id="startTime" placeholder="">

                </div>
            </div>
            <div class="layui-col-md3" style="margin-left:-70px">
                <label class="layui-form-label">至</label>
                <div class="layui-input-block layui-form">

                     <input type="text" class="layui-input" name="endTime" id="endTime" placeholder="">
                </div>
            </div>

             <div class="layui-col-md3">
                <label class="layui-form-label"> 物料号号:</label>
                <div class="layui-input-block">
                    <input type="text" name="materialCode" id="materialCode" class="layui-input" placeholder="">
                </div>
            </div>



		</div>
		<!-- 按钮区域 -->
		<div class="layui-row layui-form" style="margin-top: 10px">

			<div class="layui-col-md6">
				<div class="layui-btn-container" style="text-align: left;">
	    {{# if(d.search==null || d.search=="true"){ }}
			 <button class="layui-btn layui-btn-normal layui-btn-sm"  data-method="search" id="search" type="button"><i class="layui-icon layui-icon-search"></i>查询</button>
		 	<button class="layui-btn layui-btn-normal layui-btn-sm"  data-method="reset" type="button"><i class="layui-icon-reset"></i>重置</button>
	     {{# } }}
				</div>
			</div>
		</div>
	</div>
	<table id="urgenMaterialQuery" lay-filter="urgenMaterialQueryTabF"></table>
</script>

	<script type="text/html" id="indexTpl">
     {{d.LAY_TABLE_INDEX+1}}
   </script>
	<script type="text/javascript">
	var contextPath = config.wmsConfig.contextPath;
		var $ = layui.$;
		var element = layui.element;
		var layer = layui.layer;
		var table = layui.table;
		var form = layui.form;
		var laydate = layui.laydate;
		var oldData;

 function loadding(){
		table.render({

			elem:'#urgenMaterialQuery',
			id:'urgenMaterialQueryTabId',
	    	url:contextPath+'materialOpt/listUrgenMaterial',
	    	cellMinWidth: 100 ,
		    cols: [[

				{title: '序号',templet: '#indexTpl',width:60},
			    {field:'materialCode',title: '物料号',width:120},
			    {field:'materialDesc',title: '物料描述'},
			    {field:'arrivalCode', title: '到货通知单号',width:150},
			    {field:'arrivalItemNo',title: '行项目号'},
			    {field:'acceptCount',title: '数量',width:80},
			    {field:'materilUnit',title: '单位',width:80},
			    {field:'batchNo',title: '批次号',width:80},
			    {field:'queueTime',title: '排号时间',width:160},
			    {field:'endReceiveTime',title: '点收完成时间',width:160},
			    {field:'passTime',title: '点收审核时间',width:160},
			    {field:'moveToInspectTime',title: '移库质检区时间',width:160},
			    {field:'checkFinshTime',title: '质检完成时间',width:160},
			    {field:'dumpFinshTime',title: '转储完成时间',width:160},
			    {field:'upperFrameTime',title: '上架时间',width:160},
			    {field:'lowerFrameTime',title: '下架时间',width:160},
			    {field:'assembleTime',title: '集配时间',width:160},
			    {field:'checkTime',title: '集配复核时间',width:160},
			    {field:'sendTime',title: '出库时间',width:160},
			    {field:'bufferUploadTime',title: '缓冲卸货时间',width:160},
			    {field:'bufferCheckTime',title: '缓冲复核时间',width:160},
			    {field:'bufferSendTime',title: '缓冲发货时间',width:160},
			    {field:'deliveryTime',title: '送达交接时间',width:160}

		    	]],
			page: {theme: '#008155'},
			height: 'full-95',

    		done:function(res,page,count){//列表数据回调函数
    			//initTableDate(res.data) ;
    		}
		});
		//时间选择器
	     laydate.render({
	         elem: '#startTime',
	         range: false
	     });
	     laydate.render({
	         elem: '#endTime',
	         range: false
	     });
	     $('.layui-btn-container button').on('click', function(){
	         var othis = $(this), method = othis.data('method');
	         active[method] ? active[method].call(this, othis) : '';
	     });
		var active = {
				search:function(othis){
					var startTime =$('#startTime').val();
	                var endTime =$('#endTime').val();
	                if(startTime >endTime){
	                    layer.alert('开始时间不能大于结束时间！',{icon: 2});
	                    return ;
	                }
					//执行重载
				table.reload('urgenMaterialQueryTabId', {
					where:{
						startTime : $('#startTime').val(),
						endTime : $('#endTime').val(),
						materialCode:$('#materialCode').val(),

				      	page:1
				  	}
				});
			},
			reset:function(othis){
				 $('#startTime').val('');
                 $('#endTime').val('');
                 $('#materialCode').val('');

				form.render("select");
			}

		};


 }

	</script>


</body>
</html>
