<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta http-equiv="Content-Type" content="charset=UTF-8">
<meta name="viewport"
	content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<link rel="stylesheet" href="/iles/pages/layui/css/layui.css"  type="text/css" />
<link rel="stylesheet" href="/iles/pages/css/layui_extend.css"  media="all">
<link rel="stylesheet" href="/iles/pages/layui/css/modules/layer/default/layer.css"  type="text/css" />
<title></title>
<style type="text/css">

.layui-timeline-item:before {
        content: '';
	    position: absolute;
	    left: 5px;
	    top: 10px;
	    z-index: 0;
	    width: 100%;
	    height: 1px;
}
.layui-timeline-content {
    padding-top: 24px;
    padding-left: 0px;
}
.layui-timeline-item:before, hr {
    background-color: #33b648;
}
.layui-form-label {
    float: left;
    display: block;
    padding: 9px 15px;
    font-weight: 400;
    width: auto;
    line-height: 20px;
    text-align: right;
}
</style>
</head>

<body>
<div id="bodyDiv"></div>
<div id="materialInfo"></div>
<div id="materialprocess" style="padding-top:100px;"></div>
<div id="materialLocal" style="padding-top:100px;"></div>
<script src="/iles/pages/layui/layui.all.js" charset="UTF-8"></script>
	<script src="/iles/pages/js/serverPathConfig.js" charset="UTF-8"></script>
	<script src="/iles/pages/layui/lay/modules/tableFilter.js" charset="UTF-8"></script>
	<script src="/iles/pages/assets/js/jquery-1.10.2.js"></script>
	<script src="/iles/pages/js/loginInspect.js"></script>
	<script type="text/html" id="bodyTpl"></script>
<script type="text/html" id="materialprocessTpl">
{{#  layui.each(d, function(index, item){ }}
<div class="layui-fluid">
	<div class="layui-row layui-form">
		<div class="layui-col-md1">
			<label class="layui-form-label">{{ item.materialStatus }}</label>
		</div>
		<div class="layui-col-md11">
			<ul class="layui-timeline">
			  <li class="layui-timeline-item"  style="display:inline-block;">
			    <i class="layui-icon layui-timeline-axis">
					{{#  if(item.jobNode > 0){ }}
						&#x1005;
					{{# }else { }}
                    &#x1007;
					{{# } }}
				</i>
			    <div class="layui-timeline-content layui-text" style="width:200px;">
			      <div class="layui-timeline-title">排号</div>
			    </div>
			  </li>
			  <li class="layui-timeline-item" style="display:inline-block;">
			    <i class="layui-icon layui-timeline-axis">
					{{#  if(item.jobNode >=1){ }}
						&#x1005;
					{{# }else { }}
                    &#x1007;
					{{# } }}
				 </i>
			    <div class="layui-timeline-content layui-text" style="width:200px;">
			      <div class="layui-timeline-title">开始卸货</div>
			    </div>
			  </li>
			  <li class="layui-timeline-item" style="display:inline-block;">
			   
				<i class="layui-icon layui-timeline-axis">
					{{#  if(item.jobNode >= 4){ }}
						&#x1005;
					{{# }else { }}
                    &#x1007;
					{{# } }}
				 </i>
				 
			    <div class="layui-timeline-content layui-text" style="width:200px;">
			      <div class="layui-timeline-title">完成卸货</div>
			    </div>
			  </li>
			  <li class="layui-timeline-item" style="display:inline-block;">
			    <i class="layui-icon layui-timeline-axis">
					{{#  if(item.jobNode >= 8){ }}
						&#x1005;
					{{# }else { }}
                    &#x1007;
					{{# } }}
				</i>
			    <div class="layui-timeline-content layui-text" style="width:200px;">
			      <div class="layui-timeline-title">开始点收</div>
			    </div>
			  </li>
			  <li class="layui-timeline-item" style="display:inline-block;">
			    <i class="layui-icon layui-timeline-axis">
					{{#  if(item.jobNode >= 9){ }}
						&#x1005;
					{{# }else { }}
                    &#x1007;
					{{# } }}
				</i>
			    <div class="layui-timeline-content layui-text" style="width:200px;">
			      <div class="layui-timeline-title">完成点收</div>
			    </div>
			  </li>
			  <li class="layui-timeline-item" style="display:inline-block;">
			    <i class="layui-icon layui-timeline-axis">
					{{#  if(item.jobNode >= 10){ }}
						&#x1005;
					{{# }else { }}
                    &#x1007;
					{{# } }}
				</i>
			    <div class="layui-timeline-content layui-text" style="width:200px;">
			      <div class="layui-timeline-title">点收审核</div>
			    </div>
			  </li>
			  <li class="layui-timeline-item" style="display:inline-block;">
			    <i class="layui-icon  layui-timeline-axis">
					{{#  if(item.jobNode >= 20){ }}
						&#x1005;
                     
					{{# }else { }}
                    &#x1007;
					{{# } }}
				</i>
			    <div class="layui-timeline-content layui-text" style="width:200px;">
			      <div class="layui-timeline-title">质检完成</div>
			    </div>
			  </li>
			</ul>
		</div>	
	</div>
</div>
{{#  }) }}
</script>
<script type="text/html" id="materialTpl">
<div class="layui-fluid">
	<div class="layui-row layui-form">
		<div class="layui-col-md3">
			 	<label class="layui-form-label">物料编号</label>
		</div>
		<div class="layui-col-md3">
			 	<label class="layui-form-label">物料描述</label>
		</div>
		<div class="layui-col-md3">
			 	<label class="layui-form-label">到货通知单</label>
		</div>
		<div class="layui-col-md3">
			 	<label class="layui-form-label">应到货数量</label>
		</div>
	</div>
	<div class="layui-row layui-form">
		<div class="layui-col-md3">
			 	<label class="layui-form-label">{{ d.materialCode }}</label>
		</div>
		<div class="layui-col-md3">
			 	<label class="layui-form-label">{{ d.materialDesc }}</label>
		</div>
		<div class="layui-col-md3">
			 	<label class="layui-form-label">{{ d.arrivalCode }}</label>
		</div>
		<div class="layui-col-md3">
			 	<label class="layui-form-label">{{ d.totalNum }}</label>
		</div>
	</div>
</div>
</script>
<script type="text/javascript">
function loadding(){}
    var contextPath = config.wmsConfig.contextPath;
	var oldData = parent.oldData;
	var $ = layui.$;
	var layer = layui.layer;
	var laytpl = layui.laytpl;
	var getTpl = materialTpl.innerHTML
	,view = document.getElementById('materialInfo');
	laytpl(getTpl).render(oldData, function(html){
	  view.innerHTML = html;
	});
	
	 
	//查询发货中的任务
	 
		var option = {
				url:contextPath+'urgentMaterialClassify/listInStockStatus?arrivalDetailId='+oldData.arrivalDetailId+"&arrivalId="+oldData.arrivalId,
				type:'GET',
				success:function(res){
					if(res.code==0){
						var data = res.data;
						var getTpl = materialprocessTpl.innerHTML
						,view = document.getElementById('materialprocess');
						laytpl(getTpl).render(data, function(html){
						  view.innerHTML = html;
						});
					}
				}
			};	
			$.ajax(option);
	 
</script>
</body>
</html>