<!DOCTYPE html>
<html>
<#assign  title="收货物料监控" />
<#include '/header.html' /> 
<meta charset="UTF-8">
<style type="text/css">
.layui-table-body{
	overflow-x:auto;
}
</style>
<#if athemTag.loginFlag=="true" && athemTag.menuFlag=="true">
	<div class="layui-fluid">
		<div class="layui-row layui-form">
			 
			<div class="layui-col-md3">
                <label class="layui-form-label">工位:</label>
                 <div class="layui-input-block">
                 
                  <input type="text" class="layui-input" name="stationCode" id="stationCode" placeholder="">
                </div>
            </div>
             <div class="layui-col-md3">
                <label class="layui-form-label">物料号:</label>
                 <div class="layui-input-block">
                   <input type="text" class="layui-input" name="materialCode" id="materialCode" placeholder="">
                </div>
            </div>
			 
		 
		 <div class="layui-col-md3">
                <label class="layui-form-label">物料描述:</label>
                 <div class="layui-input-block">
                 
                  <input type="text" class="layui-input" name="materialDesc" id="materialDesc" placeholder="">
                </div>
            </div>
            
            <div class="layui-col-md3">
                <label class="layui-form-label">工厂:</label>
                 <div class="layui-input-block">
                 
                  <input type="text" class="layui-input" name="factory" id="factory" placeholder="">
                </div>
            </div>
			
		 </div>
		
		<div class="layui-row layui-form" style="margin-bottom: 0">
			<div class="layui-col-md6">&nbsp;</div>
			<div class="layui-col-md6">
				<div class="layui-btn-container" style="text-align: right;">
					<#include '/bottonContainer.html' /> 
				</div>
			</div>
		</div>
	</div>
	<table class="layui-hide" id="materialMonitoringTab" lay-filter="materialMonitoringTabF"></table>
<script src="/iles/pages/layui/layui.all.js" charset="UTF-8"></script>
	<script type="text/html" id="indexTpl">
     {{d.LAY_TABLE_INDEX+1}}
   </script>
    <script type="text/javascript">
    var $ = layui.$;
    var element = layui.element;
    var layer = layui.layer;
    var table = layui.table;
    var laydate =layui.laydate;
    var form = layui.form;
    var oldData;
 
    table.render({
        elem:'#materialMonitoringTab',
        id:'materialMonitoringTabId',
        url:'${ctx}/warningLackMateria/materialMonitoringList',
        cols:[[
        {title: '序号',templet: '#indexTpl',width: 60},
        {field:'stationCode',  width: 120,title: '工位'},
        {field:'materialCode',width: 120,title:'物料号' },
        {field:'materialDesc', width: 120, title:'物料描述'},
        {field:'foctory', width: 120, title: '工厂'},
        {field:'arrivalCode', width:120,title: '单位'},
        {field:'uploadCount', width: 120,title: '卸货数量'},
        {field:'receiveCount',  width: 120,title: '点收数量'},
        {field:'inspectCount', width: 120, title: '质检数量'},
        ]],
        page: true,
        height: 'full-95',
        done:function(res,page,count){//列表数据回调函数
        	addColor(res);
          
        }
    });
  
     
   
    var active = {
			search:function(othis){
				 
				//执行重载
			table.reload('materialMonitoringTabId', {
				where:{
					stationCode : $('#stationCode').val(),
					foctory : $('#foctory').val(),
					materialCode:$('#materialCode').val(),
					materialDesc:$('#materialDesc').val(),
					page:{"curr":1}
			  	}
			});
		},
		reset:function(othis){
			 $('#stationCode').val('');
             $('#foctory').val('');
             $('#materialCode').val('');
             $('#materialDesc').val('');
		}
		  
	};
    $('.layui-btn-container button').on('click', function(){
        var othis = $(this), method = othis.data('method');
        active[method] ? active[method].call(this, othis) : '';
    });
  
    function addColor(res) { 
    	  var data = res.data;
    	  for (var i = 1; i < res.data.length; i++) { //这里循环表格当前的数据
    		 if($.trim(data[i]["uploadCount"]) !==''){
    			  var tdCurArr = trArr.eq(i).find("td").eq(columsIndex[k]);//获取当前行的当前列
    			  tdCurArr.attr("style", "color:#009688");
    		 }
    		 if($.trim(data[i]["receiveCount"]) !==''){
   			  var tdCurArr = trArr.eq(i).find("td").eq(columsIndex[k]);//获取当前行的当前列
   			  tdCurArr.attr("style", "color:#8bc34a");
   		 }
    		 if($.trim(data[i]["inspectCount"]) !==''){
   			  var tdCurArr = trArr.eq(i).find("td").eq(columsIndex[k]);//获取当前行的当前列
   			  tdCurArr.attr("style", "color:#ffc300");
   		 }
    	  }
    }
	 
</script>
 <#else>
    <#include '/noAuthority.html' /> 
</#if> 
<#include '/footer.html' /> 