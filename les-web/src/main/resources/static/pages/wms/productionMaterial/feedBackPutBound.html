<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Content-Type" content="charset=UTF-8">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    <link rel="stylesheet" href="/iles/pages/layui/css/layui.css" type="text/css"/>
    <link rel="stylesheet" href="/iles/pages/css/layui_extend.css" media="all">
    <link rel="stylesheet" href="/iles/pages/layui/css/modules/layer/default/layer.css" type="text/css"/>
    <link rel="stylesheet" href="/iles/pages/layui/css/formSelects-v4.css"/>
    <link rel="stylesheet" href="/iles/pages/layui/css/tableFilter.css" type="text/css"/>
    <title>生产退补料详情入库</title>
</head>
<body>
<div id="bodyDiv">

</div>
<script type="text/html" id="bodyTpl">
    <div class="layui-fluid">
        <div class="layui-fluid-table">
            <div class="layui-row layui-form">
                <!--                <div class="layui-btn-container"> -->
                <!--                    <button class="layui-btn layui-btn-normal layui-btn-sm"  data-method="distributing" type="button"><i class="layui-icon layui-icon-edit"></i>任务派发</button>-->
                <!--                </div>-->
            </div>
        </div>
    </div>
    <table class="layui-hide" id="rkDetail" lay-filter="transferSlipInfoF"></table>
</script>
<script src="/iles/pages/layui/layui.all.js" charset="UTF-8"></script>
<script src="/iles/pages/js/serverPathConfig.js" charset="UTF-8"></script>
<script src="/iles/pages/js/loginInspect.js" charset="UTF-8"></script>
<script src="/iles/pages/js/common/dictSelelct.js" charset="UTF-8"></script>
<script src="/iles/pages/js/common/warehouseSelect.js" charset="UTF-8"></script>
<script type="text/html" id="toolbar">
    <a class="layui-btn layui-btn-xs" lay-event="detail">详情</a>
</script>
<script type="text/javascript">
    var element = layui.element;
    var layer = layui.layer;
    var table = layui.table;
    var form = layui.form;
    var laydate = layui.laydate;
    var beforeData = parent.oldData;
    var oldData;
    var contextPath = config.wmsConfig.contextPath;
    var active = {
        search: function (othis) {
            //执行重载
            table.reload('transferSlipInfoId', {
                where: {}
                , page: {"curr": 1}
            });
        },
        reset: function (othis) {

            form.render("select");
        }
    };

    function loadding() {
        var id = beforeData.id;
        table.render({
            elem: '#rkDetail',
            id: 'rkDetail',
            url: contextPath + 'abnormalMaterialWorkshop/getRKTaskInfo',
            cols: [[
                {
                    type: 'numbers',
                    title: '序号'
                }, {
                    field: 'receivedTaskCode',
                    title: '退补料作业入库任务号'
                }, {
                    field: 'materialCode',
                    title: '物料号'
                }, {
                    field: 'materialDesc',
                    title: '物料描述'
                }, {
                    field: 'positionCode',
                    title: '库位'
                }, {
                    field: 'receiveNum',//TODO :等待处理 这个应该不是库位数量
                    title: '数量'//(已点收)
                }

            ]],
            where: {
                //传值 startDate : startDate,
                id: id,
            },
            page: false,
            even: true,
        });
        $('.layui-btn-container button').on('click', function () {
            var othis = $(this), method = othis.data('method');
            active[method] ? active[method].call(this, othis) : '';
        });

    }

</script>
</body>
</html>