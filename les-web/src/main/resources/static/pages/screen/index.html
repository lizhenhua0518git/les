<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<title>移动点实收信息</title>
	<link rel="stylesheet" type="text/css" href="css/index.css" />
	<!--<script src="js/jquery-1.11.0.min.js" type="text/javascript" charset="utf-8"></script>-->
	<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
	<script src="js/date.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>
<div id="app">
	<div class="header">
		<div class="title"><b>移动点实收信息</b></div>
		<div class="date" id="date"></div>
		<div class="amount"><span class="right">今日任务数：{{finishedCount}}/{{totalCount}}</span></div>
	</div>
	<div class="main">
		<table class="index-table index-table-three">
			<tr class="tableHeader">
				<td>点收状态</td>
				<td>物料名称</td>
				<td class="Supplier">供应商</td>
				<td>点收时长</td>
			</tr>
			<tr v-for="item in task">
				<td class="green" v-if="item.status==15">点收中</td>
				<td class="orage" v-else>待点收</td>
				<td>{{item.materialDesc}}</td>
				<td>{{item.supplierName}}</td>
				<td>{{item.lengthOfTime}}</td>
			</tr>
			<tr v-if="task==0">
				<td colspan="4" style="font-size: 20px">暂无点收数据</td>
			</tr>
		</table>
	</div>
</div>
<script src="/iles/pages/layui/layui.all.js" charset="UTF-8"></script>
<script src="/iles/pages/js/serverPathConfig.js" charset="UTF-8"></script>
<!--<script src="/iles/pages/js/loginInspect.js" charset="UTF-8"></script>-->
<script type="text/javascript">
	var contextPath = config.wmsConfig.contextPath;

	new Vue({
		el: '#app',
		data() {
			return {
				finishedCount: "",
				totalCount: "",
				task: []
			}
		},

		methods: {
			addList() {
				//请求数据
				// var api = 'less.json';
				var api = contextPath+'receiveRecord/pointListRecordCollectionScreen';
				axios.get(api).then((res) => {
					console.log(res);
				this.finishedCount = res.data.data.finishedCount;
				this.totalCount = res.data.data.totalCount;
				this.task = res.data.data.task;
			}).catch((err) => {
					console.log(err)
				})
			}
		},
		mounted() { //请求数据，操作dom可在这进行
			var fun = this;
			fun.addList();
			var t2 = window.setInterval(function() {
				console.log('每隔5秒钟执行一次');
				fun.addList();
			},5000)
		},
	})
</script>
</body>

</html>