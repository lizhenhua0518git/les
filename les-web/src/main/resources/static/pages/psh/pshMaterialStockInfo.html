<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Content-Type" content="charset=UTF-8">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <link rel="stylesheet" href="/iles/pages/layui/css/layui.css"  type="text/css" />
    <title>立库库存数据显示</title>
</head>
<body id="bodyDiv">
<script src="/iles/pages/layui/layui.all.js" charset="UTF-8"></script>
<script src="/iles/pages/js/serverPathConfig.js" charset="UTF-8"></script>
<script src="/iles/pages/js/loginInspect.js" charset="UTF-8"></script>
<script src="/iles/pages/js/common/dictSelelct.js" charset="UTF-8"></script>
<script type="text/html" id="bodyTpl">
    <div class="layui-fluid">
        <div class="layui-row layui-form">
            <div class="layui-col-md2">
                <label class="layui-form-label">物料编码</label>
                <div class="layui-input-inline">
                    <input type="text" id="materialCode"    class="layui-input">
                </div>
            </div>
            <div class="layui-col-md2">
                <label class="layui-form-label">仓库编码</label>
                <div class="layui-input-inline">
                    <input type="text" id="wareHouseCode"    class="layui-input">
                </div>
            </div>
            <div class="layui-col-md2">
                <label class="layui-form-label">仓库类型</label>
                <div class="layui-input-inline">
                    <select name="costCenterType" id="wareHouseType" lay-verify="required">
                        <option value="">请选择</option>
                        <option value="2">板材立库</option>
                        <option value="1">型材立库</option>
                    </select>
                </div>
            </div>
            <div class="layui-col-md2">&nbsp;</div>
            <div class="layui-col-md2">&nbsp;</div>
            <div class="layui-col-md2">
                <div class="layui-btn-container" style="text-align: right;">
                    {{# if(d.search==null || d.search=="true"){ }}
                    <button class="layui-btn layui-btn-normal layui-btn-sm"  data-method="search" id="search" type="button"><i class="layui-icon layui-icon-search"></i>查询</button>
                    <button class="layui-btn layui-btn-normal layui-btn-sm"  data-method="reset" type="button"><i class="layui-icon layui-icon-reset"></i>重置</button>
                    {{# } }}
                </div>
            </div>
        </div>
    </div>
    <div class="layui-fluid-table">
        <table id="costCenterTab" lay-filter="costCenterTabF"></table>
    </div>
</script>

<script type="text/javascript">

    let element = layui.element;
    let layer = layui.layer;
    let table = layui.table;
    let form = layui.form;
    let contextPath = config.wmsConfig.contextPath;
    let oldData;

    function loadding(){
        table.render({
            elem:'#costCenterTab',
            id:'costCenterTabId',
            url: contextPath + 'materialStorageBin/listOfPshStoreBinStock',
            cols:[[
                {type:'numbers',title:'序号',width: 80},
                {field:'materialCode',title:'物料编码'},
                {field:'materialNum', title: '库存数量'},
                {field:'wareHouseCode', title: '仓库编码'},
                {field:'wareHouseName', title: '仓库名称'},
                {field:'wareHouseTypeName', title: '仓库类型'},
                {field:'createTime', title: '创建时间'}
            ]],
            page: {theme: '#008155'},
            even:true,
            done:function(res,page,count){//列表数据回调函数
            }
        });
        $('.layui-btn-container button').on('click', function(){
            var othis = $(this), method = othis.data('method');
            active[method] ? active[method].call(this, othis) : '';
        });
        form.render("select");
    }
    var active = {
        search:function(othis){
            let materialCode=$('#materialCode').val();
            let wareHoseCodes=$('#wareHouseCode').val();
            let wareHouseType=$('#wareHouseType').val();
            let params={};
            params.materialCode=materialCode;
            params.wareHouseCode=wareHoseCodes;
            if(null !=wareHouseType && wareHouseType !=""){
                params.wareHouseType=wareHouseType;
            }
            //执行重载
            table.reload('costCenterTabId', {
                where:params,
                page:{"curr":1}
            });
        },reset:function(othis){
            $('#materialCode').val("");
            $('#wareHouseCode').val("");
            $('#wareHouseType').val("");
            form.render("select");
        }
    };
</script>
</body>
</html>
